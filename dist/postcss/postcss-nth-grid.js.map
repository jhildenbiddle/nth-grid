{"version":3,"file":"postcss-nth-grid.js","sources":["../../src/postcss/lib/vars.js","../../src/postcss/util/get-number.js","../../src/postcss/util/get-unit.js","../../src/postcss/util/unit-math.js","../../src/postcss/util/get-order-offset.js","../../src/postcss/util/is-unit-match.js","../../src/postcss/lib/grid.js","../../src/postcss/util/append-selectors.js","../../src/postcss/util/round.js","../../src/postcss/lib/grid-columns.js","../../src/postcss/lib/grid-container.js","../../src/postcss/lib/grid-debug.js","../../src/postcss/lib/grid-overlay.js","../../src/postcss/util/normalize.js","../../src/postcss/index.js"],"sourcesContent":["// Exports\n// =============================================================================\nexport default {\n    // reNotLength: /[^\\w\\%\\.\\-]/,\n    reNotLength: /[^\\w%.-]/,\n    reNumber   : /^[-+]?[0-9]*\\.?[0-9]+/,\n    reUnit     : /[a-z|%]+$/,\n    rounding   : 5\n};\n","// Dependencies\n// =============================================================================\nimport vars from '../lib/vars';\n\n\n// Exports\n// =============================================================================\n// Get number in string (e.g. '12rem' => 12)\nexport default function(value, falseValue) {\n    if (vars.reNotLength.test(value)) {\n        return false;\n    }\n    else {\n        const match  = value.toString().match(vars.reNumber) || false;\n        const number = match.length ? Number(match) * 1 : falseValue || false;\n\n        return number;\n    }\n}\n","// Dependencies\n// =============================================================================\nimport vars from '../lib/vars';\n\n\n// Exports\n// =============================================================================\n// Get unit in string (e.g. '12rem' => 'rem')\nexport default function(value, falseValue) {\n    if (vars.reNotLength.test(value)) {\n        return false;\n    }\n    else {\n        const match = value.toString().match(vars.reUnit) || false;\n        const unit  = match.length ? match.toString() : falseValue || false;\n\n        return unit;\n    }\n}\n","// Dependencies\n// =============================================================================\nimport getNumber from './get-number';\nimport getUnit   from './get-unit';\n\n\n// Exports\n// =============================================================================\n// Allows for basic math on string lengths (numbers with with units)\n// Ex: unitMath(['1rem', '1rem'], ' + ') /* '2rem' */\nexport default function(arr, operator) {\n    let   finalUnit = '';\n    const nums      = [];\n\n    // Loop through array values\n    for (let i = 0; i < arr.length; i++) {\n        const num  = getNumber(arr[i]);\n        const unit = getUnit(arr[i]);\n\n        // Ignore zero value units\n        if (num !== 0) {\n            // Verify math compatibility and store unit\n            if (unit.length) {\n                if (finalUnit.length && unit !== finalUnit) {\n                    // eslint-disable-next-line\n                    console.log(`NTH-GRID: Incompatible unitMath() arguments: ${arr}`);\n\n                    return 0;\n                }\n                else {\n                    finalUnit = unit;\n                }\n            }\n        }\n\n        // Add item to numbers array\n        nums.push(num);\n    }\n\n    // Cleanse operator\n    // operator = operator.trim().replace(/[^\\+\\-\\*\\/().\\d\\s]/g, '');\n    operator = operator.trim().replace(/[^+\\-*/().\\d\\s]/g, '');\n\n    // Return result\n    const result = nums.length ? eval(nums.join(operator)).toString().concat(finalUnit) : 0; // jshint ignore:line\n\n    // Convert zero to number\n    return Number(result) === 0 ? 0 : result;\n}\n","// Dependencies\n// =============================================================================\nimport unitMath from '../util/unit-math';\n\n// Exports\n// =============================================================================\n// Calculates columns offset for source ordering.\n// Note that IE9 truncates css values after 128 characters. Grid columms\n// that require an offset using a calc() string longer than this will\n// not render properly.\nexport default function(settings, column, order) {\n    let offset = 0, i;\n\n    // Only columns following the first need offset calculated\n    if (column > 1) {\n        let sibling_val;\n\n        // Calc() required\n        if (settings.calc) {\n            // Store sibling ratio column and gutter counts.\n            // Used to generate the shortest possible calc() strings\n            const offset_vals       = [];\n            let sibling_gutters     = 0;\n            let sibling_ratio_cols  = 0;\n            const sibling_unit_cols = [];\n\n            // Loop through all preceding columns\n            for (i = 0; i < (column - 1); i++) {\n                // Get sibling values from columns_normalized or order\n                if (order) {\n                    sibling_val = settings.columns_normalized[order[i] - 1];\n                }\n                else {\n                    sibling_val = settings.columns_normalized[i];\n                }\n\n                // Gutter\n                if (settings.gutter_h !== 0) {\n                    sibling_gutters += 1;\n                }\n\n                // Ratio-based value\n                if (Number(sibling_val)) {\n                    sibling_ratio_cols += Number(sibling_val);\n                }\n                // Unit-based value\n                else {\n                    sibling_unit_cols.push(sibling_val);\n                }\n            }\n\n            // Ratio offset\n            if (sibling_ratio_cols > 0) {\n                if (sibling_ratio_cols === 1) {\n                    offset_vals.push(settings.grid_col_width);\n                }\n                else {\n                    offset_vals.push('((' + settings.grid_col_width + ') * ' + sibling_ratio_cols + ')');\n                }\n            }\n\n            // Unit offset\n            if (sibling_unit_cols.length > 0) {\n                offset_vals.push(sibling_unit_cols.join(' + '));\n            }\n\n            // Gutter offset\n            if (sibling_gutters > 0) {\n                if (sibling_gutters === 1) {\n                    offset_vals.push(settings.gutter_h);\n                }\n                else {\n                    offset_vals.push('(' + settings.gutter_h + ' * ' + sibling_gutters + ')');\n                }\n            }\n\n            // Final offset\n            offset = offset_vals.join(' + ');\n        }\n        // Calc() not required\n        else {\n            let column_width;\n\n            // Loop through all preceding columns\n            for (i = 0; i < (column - 1); i++) {\n                // Get sibling values from columns_normalized or order\n                if (order) {\n                    sibling_val = settings.columns_normalized[order[i] - 1];\n                }\n                else {\n                    sibling_val = settings.columns_normalized[i];\n                }\n\n                // Add ratio-based value\n                if (Number(sibling_val)) {\n                    const grid_col_width = settings.grid_col_width;\n\n                    column_width = unitMath([grid_col_width, sibling_val], ' * ');\n                    offset       = unitMath([offset, column_width, settings.gutter_h], ' + ');\n                }\n                // Add unit-based value\n                else {\n                    column_width = unitMath([sibling_val, settings.gutter_h], ' + ');\n                    offset       = unitMath([offset, column_width], ' + ');\n                }\n            }\n        }\n    }\n\n    return offset;\n}\n","// Dependencies\n// =============================================================================\nimport getNumber from './get-number';\nimport getUnit   from './get-unit';\n\n\n// Exports\n// =============================================================================\n// Compare units of array items, ignoring zero values w/o units\nexport default function(arr, matchUnit) {\n    // Return false if value os not a valid length (e.g. calc)\n    if (!getNumber(arr[0]) && !getUnit(arr[0])) {\n        return false;\n    }\n    // Get matching unit from first item if unspecified\n    else if (!matchUnit) {\n        matchUnit = getUnit(arr[0]);\n    }\n\n    // Loop through array values\n    for (let i = 0; i < arr.length; i++) {\n        const num  = getNumber(arr[i]);\n        const unit = num !== 0 ? getUnit(arr[i]) : false;\n\n        // Return false if value is not a valid length (e.g. calc)\n        if (num === false && unit === false) {\n            return false;\n        }\n        // Return false if units do not match\n        if (num !== 0 && unit !== matchUnit) {\n            return false;\n        }\n    }\n\n    return true;\n}\n","// Dependencies\n// =============================================================================\nimport getOrderOffset from '../util/get-order-offset';\nimport getUnit        from '../util/get-unit';\nimport isUnitMatch    from '../util/is-unit-match';\nimport unitMath       from '../util/unit-math';\n\n\n// Exports\n// =============================================================================\n// Generates new object containing grid properties\nexport default function Grid(settings, options) {\n    options = options || {};\n\n    // Protect against instantiating without `new` keyword\n    if (!(this instanceof Grid)) {\n        return new Grid(settings, options);\n    }\n\n    // Nth-Grid Defaults\n    const defaults = {\n        // Layout\n        columns               : [1],\n        gutter                : 0,\n        margin                : 0,\n        center                : true,\n        eqheight              : false,\n        valign                : false,\n        direction             : 'ltr',\n        legacy                : false,\n\n        // Debug\n        debug                 : false,\n        debug_background_color: '#000',\n        debug_text_color      : '#ccc',\n\n        // Overlay\n        overlay               : false,\n        overlay_column_color  : '#7c48c3',\n        overlay_margin_color  : '#dabfff',\n        overlay_text_color    : '#fff',\n\n        // Compilation\n        rem_base              : 16,\n        remove_warnings       : true,\n        warnings              : true\n    };\n\n    // Private defaults\n    const settings_private = {\n        width                 : '100%',\n        order                 : false,\n        auto_width            : null,\n        calc                  : null,\n        columns_ratio         : [],\n        columns_unit          : [],\n        grid_col_ratio        : 0,\n        grid_col_width        : 0,\n        grid_width            : null,\n        gutter_h              : 0,\n        columns_normalized    : [],\n        margin_h              : 0,\n        order_offsets         : [],\n        total_columns         : 0,\n        total_ratio_columns   : 0,\n        total_unit_columns    : 0\n    };\n\n    // Update defaults with global options\n    for (const opt in options) {\n        if (opt in defaults) {\n            defaults[opt] = options[opt];\n        }\n    }\n\n    // Add private properties to settings\n    // Adding these after the global options prevents setting private\n    // settings via CSS or JS globals\n    for (const priv in settings_private) {\n        if (!(priv in settings)) {\n            settings[priv] = settings_private[priv];\n        }\n    }\n\n    // Add missing properties from defaults to settings\n    for (const key in defaults) {\n        if (!(key in settings)) {\n            settings[key] = defaults[key];\n        }\n    }\n\n    // Convert single-value columns layout and order settings to arrays\n    settings.columns = settings.columns instanceof Array ? settings.columns : [settings.columns];\n    settings.order = settings.order instanceof Array ? settings.order : settings.order !== false ? [settings.order] : settings.order;\n\n    // Extract horizontal gutter and margin from arrays\n    settings.gutter_h = settings.gutter instanceof Array ? (settings.gutter[1] || settings.gutter[0]) : settings.gutter;\n    settings.gutter_v = settings.gutter instanceof Array ? settings.gutter[0] : settings.gutter;\n    settings.margin_h = settings.margin instanceof Array ? (settings.margin[1] || settings.margin[0]) : settings.margin;\n    settings.margin_v = settings.margin instanceof Array ? settings.margin[0] : settings.margin;\n\n    // Direction\n    settings.dir_left  = settings.direction === 'rtl' ? 'right' : 'left';\n    settings.dir_right = settings.direction === 'rtl' ? 'left' : 'right';\n\n\n    // Populate settings\n    // ---------------------------------------------------------------------\n    let i;\n\n    // Ratio- and unit-based column lists\n    for (i = 0; i < settings.columns.length; i++) {\n        const val = settings.columns[i];\n\n        if (Number(val)) {\n            settings.columns_ratio.push(Number(val));\n        }\n        else {\n            settings.columns_unit.push(val);\n        }\n    }\n\n    // Total column count\n    settings.total_ratio_columns = settings.columns_ratio.length === 1 ? settings.columns_ratio[0] : settings.columns_ratio.length;\n    settings.total_unit_columns  = settings.columns_unit.length;\n    settings.total_columns       = settings.total_ratio_columns + settings.total_unit_columns;\n\n    // Calculate combined grid gutter and margin\n    let grid_gutters = unitMath([settings.gutter_h, (settings.total_columns - 1)], ' * '),\n        grid_margins = unitMath([settings.margin_h, 2], ' * ');\n\n    // Grid ratio\n    if (settings.columns_ratio.length === 1) {\n        settings.grid_col_ratio = settings.columns_ratio[0];\n    }\n    else {\n        settings.grid_col_ratio = 0;\n\n        // Sum ratio based column values\n        for (i = 0; i < settings.columns_ratio.length; i++) {\n            settings.grid_col_ratio += settings.columns_ratio[i];\n        }\n    }\n\n    // Are all units matched?\n    const isMatched = isUnitMatch([]\n        .concat(settings.width)\n        .concat(settings.columns_unit)\n        .concat(settings.gutter)\n        .concat(settings.margin));\n\n    // All all grid units matched?\n    const isMatchedGrid = settings.columns_ratio.length === 0 && isUnitMatch([]\n        .concat(settings.columns_unit)\n        .concat(settings.gutter)\n        .concat(settings.margin));\n\n    // Are all grid values percent?\n    const isPercentGrid = isUnitMatch([]\n        .concat(settings.columns_unit)\n        .concat(settings.gutter)\n        .concat(settings.margin), '%');\n\n    // Calc() required?\n    settings.calc = !(isMatched || isMatchedGrid || isPercentGrid);\n\n    // Grid container auto width\n    if (settings.columns_ratio.length === 0) {\n        // Calc() required\n        if (settings.calc) {\n            const grid_unit_cols = isUnitMatch(settings.columns_unit) ? unitMath(settings.columns_unit, ' + ') : settings.columns_unit.join(' + ');\n\n            // Matched gutter & margin units\n            if (settings.gutter_h !== 0 && settings.margin_h !== 0 && isUnitMatch([grid_gutters, grid_margins])) {\n                settings.auto_width = grid_unit_cols + ' + ' + unitMath([grid_gutters, grid_margins], ' + ');\n            }\n            // Matched column and gutter units\n            else if (settings.gutter_h !== 0 && isUnitMatch([grid_unit_cols, grid_gutters])) {\n                settings.auto_width = unitMath([grid_unit_cols, grid_gutters], ' + ') + ' + ' + (settings.margin_h !== 0 ? grid_margins : '');\n            }\n            // Matched column and margin units\n            else if (settings.margin_h !== 0 && isUnitMatch([grid_unit_cols, grid_margins])) {\n                settings.auto_width = unitMath([grid_unit_cols, grid_margins], ' + ') + ' + ' + (settings.gutter_h !== 0 ? grid_gutters : '');\n            }\n            // No match\n            else {\n                settings.auto_width = grid_unit_cols;\n\n                // Add gutters\n                if (settings.gutter_h !== 0) {\n                    settings.auto_width += ' + ' + grid_gutters;\n                }\n\n                // Add margins\n                if (settings.margin_h !== 0) {\n                    settings.auto_width += ' + ' + grid_margins;\n                }\n            }\n        }\n        // Calc() not required\n        else {\n            // Unit-based columns\n            settings.auto_width = unitMath(settings.columns_unit, ' + ');\n\n            // Add gutters and margins\n            settings.auto_width = unitMath([settings.auto_width, grid_gutters, grid_margins], ' + ');\n        }\n    }\n\n    // Ratio grid width - Calc() required\n    // Grid width of 99.99% used for sub-pixel rendering bug (e.g. IE9, Chrome < 38)\n    if (settings.calc) {\n        // Single unit-based column\n        if (settings.columns_unit.length === 1) {\n            settings.grid_width = '99.99% - ' + settings.columns_unit[0];\n        }\n        // Multiple unit-based columns\n        else if (settings.columns_unit.length > 1) {\n            // Matched units\n            if (isUnitMatch(settings.columns_unit)) {\n                settings.grid_width = '99.99% - ' + unitMath(settings.columns_unit, ' + ');\n            }\n            // Mixed units\n            else {\n                settings.grid_width = '99.99% - (' + settings.columns_unit.join(' + ') + ')';\n            }\n        }\n        // No unit-based columns\n        else {\n            settings.grid_width = '99.99%';\n        }\n    }\n    // Ratio grid width - Calc() not required\n    else {\n        if (isMatched && getUnit(settings.width) !== '%') {\n            settings.grid_width = settings.width;\n\n            // Subtract unit-based column values from width\n            if (settings.columns_unit.length) {\n                settings.grid_width = unitMath([settings.grid_width, unitMath(settings.columns_unit, ' + ')], ' - ');\n            }\n        }\n        else if (isPercentGrid) {\n            settings.grid_width = '100%';\n\n            // Subtract unit-based column values from width\n            if (settings.columns_unit.length) {\n                settings.grid_width = unitMath([settings.grid_width, unitMath(settings.columns_unit, ' + ')], ' - ');\n            }\n        }\n        else {\n            settings.grid_width = '100%';\n        }\n    }\n\n    // Ratio-based column width\n    if (settings.total_ratio_columns > 0) {\n        // Calc() required\n        if (settings.calc) {\n            // Matched gutter and margin units\n            if (settings.gutter_h !== 0 && settings.margin_h !== 0 && isUnitMatch([settings.gutter_h, settings.margin_h])) {\n                settings.grid_col_width = settings.grid_width + ' - ' + unitMath([grid_gutters, grid_margins], ' + ');\n            }\n            // Matched column and gutter units\n            else if (settings.gutter_h !== 0 && isUnitMatch([settings.grid_width, grid_gutters])) {\n                settings.grid_col_width = unitMath([settings.grid_width, grid_gutters], ' - ');\n\n                if (grid_margins !== 0) {\n                    settings.grid_col_width += ' - ' + grid_margins;\n                }\n            }\n            // Matched column and margin units\n            else if (settings.margin_h !== 0 && isUnitMatch([settings.grid_width, grid_margins])) {\n                settings.grid_col_width = unitMath([settings.grid_width, grid_margins], ' - ');\n\n                if (grid_gutters !== 0) {\n                    settings.grid_col_width += ' - ' + grid_gutters;\n                }\n            }\n            // No match\n            else {\n                grid_gutters = settings.gutter_h !== 0 ? ' - ' + grid_gutters : '';\n                grid_margins = settings.margin_h !== 0 ? ' - ' + grid_margins : '';\n\n                settings.grid_col_width = settings.grid_width + grid_gutters + grid_margins;\n            }\n\n            // Divide by grid ratio\n            settings.grid_col_width = '(' + settings.grid_col_width + ') / ' + settings.grid_col_ratio;\n        }\n        // Calc() not required\n        else {\n            // Calculate grid width without gutters and margins\n            settings.grid_col_width = unitMath([settings.grid_width, grid_gutters, grid_margins], ' - ');\n\n            // Divide by grid ratio\n            settings.grid_col_width = unitMath([settings.grid_col_width, settings.grid_col_ratio], ' / ');\n        }\n    }\n\n    // Calculate ordered column offsets\n    if (settings.order && settings.order.length <= settings.total_columns) {\n        // Expand single ratio-value column to multi-column\n        // Ex: nth-grid(6) /* columns_normalized: 1 1 1 1 1 1 */\n        if (settings.columns_ratio.length === 1) {\n            for (i = 0; i < settings.columns.length; i++) {\n                const col_val = settings.columns[i];\n                const num     = Number(col_val) || false;\n\n                // Single ratio-based value\n                if (num) {\n                    for (let j = 0; j < num; j++) {\n                        settings.columns_normalized.push(1);\n                    }\n                }\n                // Other values\n                else {\n                    settings.columns_normalized.push(col_val);\n                }\n            }\n        }\n        else {\n            settings.columns_normalized = settings.columns;\n        }\n\n        // Loop through order\n        for (i = 0; i < settings.order.length; i++) {\n            let offset    = 0;\n            const order_val = settings.order[i];\n\n            // Get offset of the order column value in the original column layout\n            // Ex: Column 3 offset in original @columns\n            const column_offset = getOrderOffset(settings, order_val);\n\n            // Get offset of the order column number in the ordered column layout\n            // Ex: Column 3 offset in $order 3 2 1 (1st position)\n            const order_offset = getOrderOffset(settings, i + 1, settings.order);\n\n            // Set final offset values in array\n            if (order_offset !== column_offset) {\n                // Calc() required\n                if (settings.calc) {\n                    if (order_offset === 0) {\n                        offset = '0px - (' + column_offset + ')';\n                    }\n                    else if (column_offset === 0) {\n                        offset = order_offset;\n                    }\n                    else {\n                        offset = '(' + order_offset + ') - (' + column_offset + ')';\n                    }\n                }\n                // Calc() not required\n                else {\n                    offset = unitMath([order_offset, column_offset], ' - ');\n                }\n            }\n\n            // Push value to order offset array\n            settings.order_offsets.push(offset);\n        }\n    }\n\n    // Return settings object\n    return settings;\n}\n","// Exports\n// =============================================================================\n// Appends content to comma-separated selector strings\nexport default function(selectorList, appendText) {\n    return selectorList.split(',').map(function(selector) {\n        return selector.trim() + appendText;\n    });\n}\n","// Dependencies\n// =============================================================================\nimport getNumber from './get-number';\nimport getUnit   from './get-unit';\nimport vars      from '../lib/vars';\n\n\n// Exports\n// =============================================================================\n// Round value to specified decimal places\nexport default function(val, decimals) {\n    decimals = decimals || vars.rounding;\n\n    let   num  = getNumber(val);\n    const unit = getUnit(val);\n\n    // Only use toFixed() if length if greater than decimals\n    if (num.toString().match(/\\d/g).length > decimals) {\n        num = Number(Math.round(num + 'e' + decimals) + 'e-' + decimals);\n    }\n\n    return unit ? num.toString() + unit : num;\n}\n","// Dependencies\n// =============================================================================\nimport postcss         from 'postcss';\nimport appendSelectors from '../util/append-selectors';\nimport round           from '../util/round';\nimport unitMath        from '../util/unit-math';\n\n\n// Functions\n// =============================================================================\n// Generates overly content rule\nfunction overlayContent(grid, selector, container, content) {\n    if (grid.overlay) {\n        const selectorBefore = selector.map(function(sel) {\n            return sel.trim() + ':before';\n        });\n\n        container.append(\n            postcss.rule(\n                { selector: selectorBefore }\n            ).append(\n                { prop: 'content', value: '\"' + content + '\" !important'}\n            )\n        );\n    }\n}\n\n\n// Exports\n// =============================================================================\n// Generates css for grid columns\nexport default function gridColumns(grid, nthSelector, selectorContainer, siblingContainer) {\n    let newRule;\n\n    // Legacy warning\n    if (grid.legacy === true && grid.calc === true && grid.warnings ===  true) {\n        // eslint-disable-next-line\n        console.warn(`NTH-GRID: \"${nthSelector}\" requires calc() support. This grid will not render properly in legacy browsers.`);\n    }\n\n    // All columns (low specificity)\n    // -------------------------------------------------------------------------\n    siblingContainer.append(\n        postcss.rule(\n            { selector: appendSelectors(nthSelector, ' > *') }\n        ).append(\n            { prop: 'display', value: 'block' },\n            { prop: 'box-sizing', value: 'border-box' }\n        )\n    );\n\n    // All columns (nth specificity)\n    // -------------------------------------------------------------------------\n    newRule = postcss.rule(\n        { selector: appendSelectors(nthSelector, ' > *:nth-child(1n)') }\n    ).append(\n        { prop: 'float', value: grid.dir_left },\n        { prop: 'clear', value: 'none' },\n        { prop: 'position', value: 'static' },\n        { prop: grid.dir_left, value: 'auto' },\n        { prop: 'margin-' + grid.dir_right, value: '0' },\n        // Gutter - Vertical\n        { prop: 'margin-top', value: grid.gutter_v },\n        // Gutter - Horizontal\n        { prop: 'margin-' + grid.dir_left, value: grid.gutter_h }\n    );\n\n    if (grid.legacy === true) {\n        // IE7 float fix\n        newRule.append(\n            { prop: '*display', value: 'inline' },\n            { prop: '*float', value: 'none' },\n            { prop: '*vertical-align', value: 'top' },\n            { prop: '*zoom', value: '1' }\n        );\n    }\n\n    siblingContainer.append(newRule);\n\n    // All columns in first row\n    // -------------------------------------------------------------------------\n    siblingContainer.append(\n        postcss.rule(\n            { selector: appendSelectors(nthSelector, ' > *:nth-child(-n + ' + grid.total_columns + ')') }\n        ).append(\n            { prop: 'margin-top', value: grid.margin_v }\n        )\n    );\n\n    if (grid.legacy === true && grid.margin_h === 0) {\n        siblingContainer.append(\n            // Last column in each row\n            postcss.rule(\n                { selector: appendSelectors(nthSelector, ' > *:nth-child(' + grid.total_columns + 'n)') }\n            ).append(\n                // IE7 sub-pixel rounding fix\n                { prop: '*margin-' + grid.dir_right, value: '-2px' }\n            )\n        );\n    }\n\n    // First column each row\n    // -------------------------------------------------------------------------\n    siblingContainer.append(\n        postcss.rule(\n            { selector: appendSelectors(nthSelector, ' > *:nth-child(' + grid.total_columns + 'n + 1)') }\n        ).append(\n            { prop: 'clear', value: grid.dir_left },\n            { prop: 'margin-' + grid.dir_left, value: grid.margin_h }\n        )\n    );\n\n    // All columns in last row\n    // -------------------------------------------------------------------------\n    newRule = postcss.rule(\n        { selector: appendSelectors(nthSelector, ' > *:nth-last-child(-n + ' + grid.total_columns + ')') }\n    );\n\n    // Margin - Vertical\n    if (grid.margin_v === 0) {\n        newRule.append(\n            { prop: 'margin-bottom', value: '0' }\n        );\n    }\n    // Calc used to target modern browsers because Selectivizr does\n    // not properly match this selector using NWMatcher (it does match\n    // properly with jQuery). Entire row must be targeted to ensure\n    // proper alignment when vertical alignment option is used.\n    else {\n        newRule.append(\n            { prop: 'margin-bottom', value: 'calc(' + grid.margin_v + ')' }\n        );\n    }\n\n    siblingContainer.append(newRule);\n\n    if (grid.legacy === true) {\n        // Last child serving as \"last row\" for selectivir compatibility.\n        // Only one element in the last row is needed for vertical margin\n        // since vertical alignment (via flexbox) is not an issue.\n        siblingContainer.append(\n            postcss.rule(\n                { selector: appendSelectors(nthSelector, ' > *:last-child') }\n            ).append(\n                { prop: 'margin-bottom', value: grid.margin_v }\n            )\n        );\n    }\n\n    // Width: Unit-based column(s) only\n    // -------------------------------------------------------------------------\n    if (grid.columns_ratio.length === 0) {\n        grid.columns.forEach(function(columnVal, i) {\n            i++;\n\n            newRule = postcss.rule(\n                { selector: appendSelectors(nthSelector, ' > *:nth-child(' + grid.total_columns + 'n + ' + i + ')') }\n            ).append(\n                { prop: 'width', value: columnVal }\n            );\n\n            siblingContainer.append(newRule);\n\n            // Grid overlay\n            overlayContent(grid, newRule.selector, siblingContainer, columnVal);\n        });\n    }\n\n    // Width: Single ratio-based value\n    // -------------------------------------------------------------------------\n    else if (grid.columns_ratio.length === 1) {\n        // Ratio-based column\n        newRule = postcss.rule(\n            { selector: appendSelectors(nthSelector, ' > *:nth-child(1n)') }\n        );\n\n        // Calc() required\n        if (grid.calc) {\n            siblingContainer.append(\n                newRule.append(\n                    { prop: 'width', value: 'calc(' + grid.grid_col_width + ')'}\n                )\n            );\n\n            // Grid overlay\n            overlayContent(grid, newRule.selector, siblingContainer, '1/' + grid.grid_col_ratio + ' (calc)');\n        }\n        // Calc() not required\n        else {\n            siblingContainer.append(\n                newRule.append(\n                    { prop: 'width', value: round(grid.grid_col_width)}\n                )\n            );\n\n            // Grid overlay\n            overlayContent(grid, newRule.selector, siblingContainer, '1/' + grid.grid_col_ratio + ' (' + round(grid.grid_col_width, 2) + ')');\n        }\n\n        // Unit-based column(s)\n        if (grid.columns_unit.length > 0) {\n            grid.columns.forEach(function(columnVal, i) {\n                columnVal = Number(columnVal) || columnVal;\n\n                if (columnVal !== grid.total_ratio_columns) {\n                    const nthCol = i > grid.columns.indexOf(grid.total_ratio_columns) ? i + grid.total_ratio_columns : i + 1;\n\n                    newRule = postcss.rule(\n                        { selector: appendSelectors(nthSelector, ' > *:nth-child(' + grid.total_columns + 'n + ' + nthCol + ')') }\n                    ).append(\n                        { prop: 'width', value: columnVal }\n                    );\n\n                    siblingContainer.append(newRule);\n\n                    // Grid overlay\n                    overlayContent(grid, newRule.selector, siblingContainer, columnVal);\n                }\n            });\n        }\n    }\n\n    // Width: Mutiple ratio-based values\n    // -------------------------------------------------------------------------\n    else {\n        grid.columns.forEach(function(columnVal, i) {\n            i++;\n\n            const newRule = postcss.rule(\n                { selector: appendSelectors(nthSelector, ' > *:nth-child(' + grid.total_columns + 'n + ' + i + ')') }\n            );\n\n            // Ratio-based column\n            if (Number(columnVal)) {\n                // Calc() required\n                if (grid.calc) {\n                    siblingContainer.append(\n                        newRule.append(\n                            { prop: 'width', value: 'calc((' + grid.grid_col_width + ') * ' + columnVal + ')' }\n                        )\n                    );\n\n                    // Grid overlay\n                    overlayContent(grid, newRule.selector, siblingContainer, columnVal + '/' + grid.grid_col_ratio + ' (calc)');\n                }\n                // Calc() not required\n                else {\n                    const columnWidth = round(unitMath([grid.grid_col_width, columnVal], ' * '));\n\n                    siblingContainer.append(\n                        newRule.append(\n                            { prop: 'width', value: columnWidth }\n                        )\n                    );\n\n                    // Grid overlay\n                    overlayContent(grid, newRule.selector, siblingContainer, columnVal + '/' + grid.grid_col_ratio + ' (' + round(columnWidth, 2) + ')');\n                }\n            }\n            // Unit-based columns\n            else {\n                siblingContainer.append(\n                    newRule.append(\n                        { prop: 'width', value: columnVal }\n                    )\n                );\n\n                // Grid overlay\n                overlayContent(grid, newRule.selector, siblingContainer, columnVal);\n            }\n        });\n    }\n\n    // Order\n    // -------------------------------------------------------------------------\n    // Invalid order\n    if (grid.order && grid.order.length > grid.total_columns) {\n        if (grid.warnings ===  true) {\n            // eslint-disable-next-line\n            console.warn(`NTH-GRID: \"${nthSelector}\" order [${grid.order}] exceeds total column count of ${grid.total_columns} for columns [${grid.columns}]. Order not applied.`);\n        }\n    }\n    // Valid order\n    else if (grid.order_offsets.length) {\n        grid.order_offsets.forEach(function(offset, i) {\n            const orderVal = grid.order[i];\n\n            if (offset !== 0) {\n                siblingContainer.append(\n                    postcss.rule(\n                        { selector: appendSelectors(nthSelector, ' > *:nth-child(' + grid.total_columns + 'n + ' + orderVal + ')') }\n                    ).append(\n                        { prop: 'position', value: 'relative' },\n                        { prop: grid.dir_left, value: grid.calc ? 'calc(' + offset + ')' : round(offset) }\n                    )\n                );\n            }\n        });\n    }\n}\n","// Dependencies\n// =============================================================================\nimport postcss         from 'postcss';\nimport appendSelectors from '../util/append-selectors';\n\n\n// Exports\n// =============================================================================\n// Generates css for grid container\nexport default function gridContainer(grid, nthSelector, selectorContainer, siblingContainer) {\n    selectorContainer.append(\n        { prop: 'display', value: 'block' }\n    );\n\n    // Legacy\n    if (grid.legacy === true) {\n        // IE7 double padding fix\n        selectorContainer.append({ prop: '*display', value: 'inline-block' });\n    }\n\n    // Legacy\n    if (grid.legacy === true && grid.order) {\n        // IE7 relative position fix\n        selectorContainer.append({ prop: '*position', value: 'relative' });\n    }\n\n    // Box sizing\n    if (grid.total_ratio_columns === 0) {\n        // Allow for borders when auto-width has been applied\n        selectorContainer.append({ prop: 'box-sizing', value: 'content-box' });\n    }\n    else {\n        // Allow for borders when auto-width has been applied\n        selectorContainer.append({ prop: 'box-sizing', value: 'border-box' });\n    }\n\n    // Flexbox\n    if (grid.eqheight === true || grid.valign === 'top' || grid.valign === 'center' || grid.valign === 'middle' || grid.valign === 'bottom') {\n        selectorContainer.append(\n            { prop: 'display', value: '-webkit-box' },\n            { prop: 'display', value: '-webkit-flex' },\n            { prop: 'display', value: '-ms-flexbox' },\n            { prop: 'display', value: 'flex' },\n            { prop: '-webkit-flex-wrap', value: 'wrap' },\n            { prop: '-ms-flex-wrap', value: 'wrap' },\n            { prop: 'flex-wrap', value: 'wrap' }\n        );\n\n        // Equal-height columns\n        if (grid.eqheight === true) {\n            // Legacy warning\n            if (grid.legacy === true && grid.warnings === true) {\n                // eslint-disable-next-line\n                console.warn(`NTH-GRID: \"${nthSelector}\" requires flexbox support for equal-height columns. This feature is not supported by legacy browsers.`);\n            }\n        }\n        // Vertical alignment\n        else {\n            // Legacy warning\n            if (grid.legacy === true && grid.warnings === true) {\n                // eslint-disable-next-line\n                console.warn(`NTH-GRID: \"${nthSelector}\" requires flexbox support for vertical alignment. This feature is not supported by legacy browsers.`);\n            }\n            if (grid.valign === 'top') {\n                selectorContainer.append(\n                    { prop: '-webkit-box-align', value: 'start' },\n                    { prop: '-webkit-align-items', value: 'flex-start' },\n                    { prop: '-ms-flex-align', value: 'start' },\n                    { prop: 'align-items', value: 'flex-start' }\n                );\n            }\n            if (grid.valign === 'center' || grid.valign === 'middle') {\n                selectorContainer.append(\n                    { prop: '-webkit-box-align', value: 'center' },\n                    { prop: '-webkit-align-items', value: 'center' },\n                    { prop: '-ms-flex-align', value: 'center' },\n                    { prop: 'align-items', value: 'center' }\n                );\n            }\n            if (grid.valign === 'bottom') {\n                selectorContainer.append(\n                    { prop: '-webkit-box-align', value: 'end' },\n                    { prop: '-webkit-align-items', value: 'flex-end' },\n                    { prop: '-ms-flex-align', value: 'end' },\n                    { prop: 'align-items', value: 'flex-end' }\n                );\n            }\n        }\n\n        // Direction\n        if (grid.direction === 'rtl') {\n            selectorContainer.append(\n                { prop: '-webkit-box-orient', value: 'horizontal' },\n                { prop: '-webkit-box-direction', value: 'reverse' },\n                { prop: '-webkit-flex-direction', value: 'row-reverse' },\n                { prop: '-ms-flex-direction', value: 'row-reverse' },\n                { prop: 'flex-direction', value: 'row-reverse' }\n            );\n        }\n    }\n\n    // Width\n    if (grid.total_ratio_columns === 0 && grid.calc === true) {\n        selectorContainer.append({ prop: 'width', value: 'calc(' + grid.auto_width + ')' });\n    }\n    else if (grid.total_ratio_columns === 0) {\n        selectorContainer.append({ prop: 'width', value: grid.auto_width });\n    }\n    else if (grid.width !== '100%') {\n        selectorContainer.append({ prop: 'width', value: grid.width });\n    }\n    else {\n        selectorContainer.append({ prop: 'width', value: 'auto' });\n    }\n\n    // Centering\n    selectorContainer.append (\n        { prop: 'margin-right', value: grid.center === true ? 'auto' : 0 },\n        { prop: 'margin-left', value: grid.center === true ? 'auto' : 0 }\n    );\n\n    // Clearfix\n    siblingContainer.append(\n        postcss.rule(\n            { selector: appendSelectors(nthSelector, ':after') }\n        ).append(\n            { prop: 'content', value: '\\'\\'' },\n            { prop: 'display', value: 'table' },\n            { prop: 'clear', value: 'both' }\n        )\n    );\n}\n","// Dependencies\n// =============================================================================\nimport postcss         from 'postcss';\nimport appendSelectors from '../util/append-selectors';\n\n\n// Exports\n// =============================================================================\n// Generates debug css for grid container and columns\nexport default function gridDebug(grid, nthSelector, selectorContainer, siblingContainer) {\n    if (grid.debug) {\n        const debugContent = [\n            'columns            : ' + grid.columns,\n            'gutter             : ' + grid.gutter,\n            'margin             : ' + grid.margin,\n            'width              : ' + grid.width,\n            'order              : ' + grid.order,\n            'center             : ' + grid.center,\n            'eqheight           : ' + grid.eqheight,\n            'legacy             : ' + grid.legacy + '\\\\A ',\n            'auto_width         : ' + grid.auto_width,\n            'calc               : ' + grid.calc,\n            'columns_ratio      : ' + grid.columns_ratio,\n            'columns_unit       : ' + grid.columns_unit,\n            'grid_col_ratio     : ' + grid.grid_col_ratio,\n            'grid_col_width     : ' + grid.grid_col_width,\n            'grid_width         : ' + grid.grid_width,\n            'order_offsets      : ' + grid.order_offsets,\n            'total_columns      : ' + grid.total_columns,\n            'total_ratio_columns: ' + grid.total_ratio_columns,\n            'total_unit_columns : ' + grid.total_unit_columns\n        ].join('\\\\A ');\n\n        siblingContainer.append(\n            postcss.rule(\n                { selector: appendSelectors(nthSelector, ':before') }\n            ).append(\n                { text: 'Nth-Grid Debug' },\n                { prop: 'content', value: '\"' + debugContent + '\"' },\n                { prop: 'display', value: 'block !important' },\n                { prop: 'flex-basis', value: '100% !important' },\n                { prop: 'overflow', value: 'hidden !important' },\n                { prop: 'padding', value: '1em !important' },\n                { prop: 'background', value: grid.debug_background_color + ' !important' },\n                { prop: 'color', value: grid.debug_text_color + ' !important' },\n                { prop: 'font-family', value: '\"Lucida Console\", \"Consolas\", Monaco, monospace !important' },\n                { prop: 'font-size', value: '12px !important' },\n                { prop: 'line-height', value: '1.4 !important' },\n                { prop: 'text-align', value: 'left !important' },\n                { prop: 'white-space', value: 'pre !important' }\n            )\n        );\n    }\n}\n","// Dependencies\n// =============================================================================\nimport postcss         from 'postcss';\nimport appendSelectors from '../util/append-selectors';\nimport unitMath        from '../util/unit-math';\n\n\n// Exports\n// =============================================================================\n// Generates overlay css for grid columns\nexport default function gridOverlay(grid, nthSelector, selectorContainer, siblingContainer) {\n    const overlayFontSize = '14px';\n\n    if (grid.overlay) {\n        selectorContainer.append(\n            { text: 'Nth-Grid Overlay' },\n            { prop: 'position', value: 'relative' },\n            { prop: 'visibility', value: 'visible !important' },\n            { prop: 'background', value: grid.overlay_margin_color + ' !important' }\n        );\n\n        siblingContainer.append(\n            postcss.rule(\n                { selector: nthSelector + ' > *' }\n            ).append(\n                { text: 'Nth-Grid Overlay' },\n                { prop: 'position', value: 'relative !important' },\n                { prop: 'min-height', value: unitMath([overlayFontSize, 3], ' * ') + ' !important' },\n                { prop: 'background', value: grid.overlay_column_color +  ' !important' },\n                { prop: 'color', value: 'transparent !important' }\n            )\n        );\n\n        siblingContainer.append(\n            postcss.rule(\n                { selector: appendSelectors(nthSelector, ' > *:before') }\n            ).append(\n                { text: 'Nth-Grid Overlay' },\n                { prop: 'position', value: 'absolute !important' },\n                { prop: 'top', value: '0 !important' },\n                { prop: 'bottom', value: '0 !important' },\n                { prop: 'left', value: '0 !important' },\n                { prop: 'right', value: '0 !important' },\n                { prop: 'height', value: overlayFontSize + ' !important' },\n                { prop: 'width', value: '100% !important' },\n                { prop: 'margin', value: 'auto !important' },\n                { prop: 'color', value: grid.overlay_text_color +  ' !important' },\n                { prop: 'font-size', value: overlayFontSize +  ' !important' },\n                { prop: 'text-align', value: 'center !important' },\n                { prop: 'line-height', value: '1 !important' }\n            )\n        );\n\n        siblingContainer.append(\n            postcss.rule(\n                { selector: nthSelector + ' > * > *' }\n            ).append(\n                { text: 'Nth-Grid Overlay' },\n                { prop: 'visibility', value: 'hidden !important' }\n            )\n        );\n    }\n}\n","// Dependencies\n// =============================================================================\nimport getNumber from './get-number';\n\n\n// Exports\n// =============================================================================\n// Converts numbers, arrays and booleans stored as strings to appropriate type\nexport default function(val) {\n    // Number\n    if (Number(val)) {\n        return Number(val);\n    }\n    // Zero with units\n    else if (getNumber(val) === 0) {\n        return 0;\n    }\n    // Boolean\n    else if (val.toLowerCase() === 'true' || val.toLowerCase() === 'false') {\n        return val.toLowerCase() === 'true';\n    }\n    // No change\n    else {\n        return val;\n    }\n}\n","// Dependencies\n// =============================================================================\nimport getNumber     from './util/get-number';\nimport getUnit       from './util/get-unit';\nimport Grid          from './lib/grid';\nimport gridColumns   from './lib/grid-columns';\nimport gridContainer from './lib/grid-container';\nimport gridDebug     from './lib/grid-debug';\nimport gridOverlay   from './lib/grid-overlay';\nimport normalize     from './util/normalize';\nimport postcss       from 'postcss';\n\n\n// Exports\n// =============================================================================\n// Entry point for PostCSS plugin\nexport default postcss.plugin('postcss-nth-grid', options => {\n    options = options || {};\n\n    const NTH_GLOBAL_PREFIX = '--nth-grid-';\n    const NTH_SELECTOR      = 'nth-grid';\n\n    return function(css) {\n        // Loop through rules and find all global settings in root element(s)\n        css.walkRules(function(rule) {\n            // Global options\n            if (rule.selector === ':root') {\n                rule.walkDecls(function(decl) {\n                    if (decl.prop.indexOf(NTH_GLOBAL_PREFIX) === 0) {\n                        const key = decl.prop.replace(NTH_GLOBAL_PREFIX, '').replace(/-/g, '_');\n                        const arr = decl.value.split(' ').map(function(val){\n                            return normalize(val);\n                        });\n\n                        // Add to options object\n                        options[key] = arr.length > 1 ? arr : arr[0];\n                    }\n                });\n\n                // Remove options\n                if (options.remove_globals) {\n                    // Remove declarations\n                    rule.walkDecls(function(decl) {\n                        if (decl.prop.indexOf(NTH_GLOBAL_PREFIX) === 0) {\n                            decl.remove();\n                        }\n                    });\n\n                    // Remove root element if empty\n                    if (rule.nodes.length === 0) {\n                        rule.remove();\n                    }\n                }\n            }\n\n            // Nth-Grid blocks\n            if (rule.selector === NTH_SELECTOR) {\n                const nthRule     = rule;\n                const nthSelector = nthRule.parent.selector;\n                const settings    = {};\n\n                // Nth-Grid Variables\n                // -------------------------------------------------------------\n                // Add semicolon to last declarations\n                nthRule.parent.raws.semicolon = true;\n\n                // Loop through nth-grid declaration and update settings\n                nthRule.walkDecls(function(decl) {\n                    const key = decl.prop.replace(/-/g, '_');\n                    const arr = decl.value.split(' ').map(function(val){\n                        return normalize(val);\n                    });\n\n                    // Add to settings object\n                    settings[key] = arr.length > 1 ? arr : arr[0];\n                });\n\n                // Get grid settings and store as object\n                const grid = new Grid(settings, options);\n\n                // Create placeholder containers for all generated css.\n                // By adding new nodes to these containers first and then moving\n                // the child nodes after css generation is complete we can use\n                // 'append' instead of 'insert' and ensure new css content is\n                // added in the correct order and respect the position of the\n                // declarations that proceed the nth-grid block.\n                const selectorContainer = nthRule.clone({ selector: 'nth-grid-output' })\n                    .removeAll()\n                    .moveAfter(nthRule);\n\n                // Create placeholder rule for all generated css\n                const siblingContainer = nthRule.clone({ selector: 'nth-grid-sibling-output' })\n                    .removeAll()\n                    .moveAfter(nthRule.parent);\n\n                // Nth-Grid CSS\n                // -------------------------------------------------------------\n                // Generate content within placeholder containers\n                gridContainer(grid, nthSelector, selectorContainer, siblingContainer);\n                gridColumns(grid, nthSelector, selectorContainer, siblingContainer);\n                gridOverlay(grid, nthSelector, selectorContainer, siblingContainer);\n                gridDebug(grid, nthSelector, selectorContainer, siblingContainer);\n\n                // Convert rem values to px for legacy browsers\n                if (grid.legacy) {\n                    // Loop through containers\n                    [selectorContainer, siblingContainer].forEach(function(container) {\n                        container.walk(function(node) {\n                            if (node.value && getUnit(node.value) === 'rem') {\n                                const pxVal = getNumber(node.value) * grid.rem_base + 'px';\n\n                                node.parent.insertBefore(node, node.clone({ prop: node.prop, value: pxVal }));\n                            }\n                        });\n                    });\n                }\n\n                // Loop through containers\n                [selectorContainer, siblingContainer].forEach(function(container) {\n                    container.each(function(node) {\n                        // Set each node's source to the nthRule source\n                        node.source = nthRule.source;\n                        // Move the node\n                        node.moveBefore(container);\n                    });\n                    // Remove the container\n                    container.remove();\n                });\n\n                // Remove nth-grid block\n                nthRule.remove();\n            }\n        });\n    };\n});\n"],"names":["value","falseValue","vars","reNotLength","test","match","toString","reNumber","number","length","Number","reUnit","unit","arr","operator","finalUnit","nums","i","num","getNumber","getUnit","log","push","trim","replace","result","eval","join","concat","settings","column","order","offset","sibling_val","calc","offset_vals","sibling_gutters","sibling_ratio_cols","sibling_unit_cols","columns_normalized","gutter_h","grid_col_width","column_width","unitMath","matchUnit","Grid","options","this","defaults","settings_private","opt","priv","key","columns","Array","gutter","gutter_v","margin_h","margin","margin_v","dir_left","direction","dir_right","val","columns_ratio","columns_unit","total_ratio_columns","total_unit_columns","total_columns","grid_gutters","grid_margins","grid_col_ratio","isMatched","isUnitMatch","width","isMatchedGrid","isPercentGrid","grid_unit_cols","auto_width","grid_width","col_val","j","order_val","column_offset","getOrderOffset","order_offset","order_offsets","selectorList","appendText","split","map","selector","decimals","rounding","Math","round","overlayContent","grid","container","content","overlay","selectorBefore","sel","append","postcss","rule","prop","gridColumns","nthSelector","selectorContainer","siblingContainer","newRule","legacy","warnings","warn","appendSelectors","forEach","columnVal","nthCol","indexOf","columnWidth","orderVal","gridContainer","eqheight","valign","center","gridDebug","debug","debugContent","text","debug_background_color","debug_text_color","gridOverlay","overlayFontSize","overlay_margin_color","overlay_column_color","overlay_text_color","toLowerCase","plugin","NTH_GLOBAL_PREFIX","NTH_SELECTOR","css","walkRules","walkDecls","decl","normalize","remove_globals","remove","nodes","nthRule","parent","raws","semicolon","clone","removeAll","moveAfter","walk","node","pxVal","rem_base","insertBefore","each","source","moveBefore"],"mappings":"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"}