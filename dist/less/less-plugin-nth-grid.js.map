{"version":3,"file":"less-plugin-nth-grid.js","sources":["../../src/postcss/lib/vars.js","../../src/postcss/util/get-number.js","../../src/postcss/util/get-unit.js","../../src/postcss/util/unit-math.js","../../src/postcss/util/get-order-offset.js","../../src/postcss/util/is-unit-match.js","../../src/postcss/lib/grid.js","../../src/less/plugin/lib/to-value.js","../../src/less/plugin/lib/to-array.js","../../src/less/plugin/lib/to-tree.js","../../src/less/plugin/index.js"],"sourcesContent":["// Exports\n// =============================================================================\nexport default {\n    // reNotLength: /[^\\w\\%\\.\\-]/,\n    reNotLength: /[^\\w%.-]/,\n    reNumber   : /^[-+]?[0-9]*\\.?[0-9]+/,\n    reUnit     : /[a-z|%]+$/,\n    rounding   : 5\n};\n","// Dependencies\n// =============================================================================\nimport vars from '../lib/vars';\n\n\n// Exports\n// =============================================================================\n// Get number in string (e.g. '12rem' => 12)\nexport default function(value, falseValue) {\n    if (vars.reNotLength.test(value)) {\n        return false;\n    }\n    else {\n        const match  = value.toString().match(vars.reNumber) || false;\n        const number = match.length ? Number(match) * 1 : falseValue || false;\n\n        return number;\n    }\n}\n","// Dependencies\n// =============================================================================\nimport vars from '../lib/vars';\n\n\n// Exports\n// =============================================================================\n// Get unit in string (e.g. '12rem' => 'rem')\nexport default function(value, falseValue) {\n    if (vars.reNotLength.test(value)) {\n        return false;\n    }\n    else {\n        const match = value.toString().match(vars.reUnit) || false;\n        const unit  = match.length ? match.toString() : falseValue || false;\n\n        return unit;\n    }\n}\n","// Dependencies\n// =============================================================================\nimport getNumber from './get-number';\nimport getUnit   from './get-unit';\n\n\n// Functions\n// =============================================================================\n// Calculates string as mathematical expression. Used instead of eval to avoid\n// console warning on compilation.\nfunction stringMath(expression) {\n    return new Function('return ' + expression)();\n}\n\n\n// Exports\n// =============================================================================\n// Allows for basic math on string lengths (numbers with with units)\n// Ex: unitMath(['1rem', '1rem'], ' + ') /* '2rem' */\nexport default function(arr, operator) {\n    let   finalUnit = '';\n    const nums      = [];\n\n    // Loop through array values\n    for (let i = 0; i < arr.length; i++) {\n        const num  = getNumber(arr[i]);\n        const unit = getUnit(arr[i]);\n\n        // Ignore zero value units\n        if (num !== 0) {\n            // Verify math compatibility and store unit\n            if (unit.length) {\n                if (finalUnit.length && unit !== finalUnit) {\n                    // eslint-disable-next-line\n                    console.log(`NTH-GRID: Incompatible unitMath() arguments: ${arr}`);\n\n                    return 0;\n                }\n                else {\n                    finalUnit = unit;\n                }\n            }\n        }\n\n        // Add item to numbers array\n        nums.push(num);\n    }\n\n    // Cleanse operator\n    operator = operator.trim().replace(/[^+\\-*/().\\d\\s]/g, '');\n\n    // Calculate result\n    const result = nums.length ? stringMath(nums.join(operator)).toString().concat(finalUnit) : 0; // jshint ignore:line\n\n    // Convert zero to number\n    return Number(result) === 0 ? 0 : result;\n}\n","// Dependencies\n// =============================================================================\nimport unitMath from '../util/unit-math';\n\n// Exports\n// =============================================================================\n// Calculates columns offset for source ordering.\n// Note that IE9 truncates css values after 128 characters. Grid columms\n// that require an offset using a calc() string longer than this will\n// not render properly.\nexport default function(settings, column, order) {\n    let offset = 0, i;\n\n    // Only columns following the first need offset calculated\n    if (column > 1) {\n        let sibling_val;\n\n        // Calc() required\n        if (settings.calc) {\n            // Store sibling ratio column and gap counts.\n            // Used to generate the shortest possible calc() strings\n            const offset_vals       = [];\n            let sibling_gaps        = 0;\n            let sibling_ratio_cols  = 0;\n            const sibling_unit_cols = [];\n\n            // Loop through all preceding columns\n            for (i = 0; i < (column - 1); i++) {\n                // Get sibling values from columns_normalized or order\n                if (order) {\n                    sibling_val = settings.columns_normalized[order[i] - 1];\n                }\n                else {\n                    sibling_val = settings.columns_normalized[i];\n                }\n\n                // Gap\n                if (settings.gap_h !== 0) {\n                    sibling_gaps += 1;\n                }\n\n                // Ratio-based value\n                if (Number(sibling_val)) {\n                    sibling_ratio_cols += Number(sibling_val);\n                }\n                // Unit-based value\n                else {\n                    sibling_unit_cols.push(sibling_val);\n                }\n            }\n\n            // Ratio offset\n            if (sibling_ratio_cols > 0) {\n                if (sibling_ratio_cols === 1) {\n                    offset_vals.push(settings.grid_col_width);\n                }\n                else {\n                    offset_vals.push('((' + settings.grid_col_width + ') * ' + sibling_ratio_cols + ')');\n                }\n            }\n\n            // Unit offset\n            if (sibling_unit_cols.length > 0) {\n                offset_vals.push(sibling_unit_cols.join(' + '));\n            }\n\n            // Gap offset\n            if (sibling_gaps > 0) {\n                if (sibling_gaps === 1) {\n                    offset_vals.push(settings.gap_h);\n                }\n                else {\n                    offset_vals.push('(' + settings.gap_h + ' * ' + sibling_gaps + ')');\n                }\n            }\n\n            // Final offset\n            offset = offset_vals.join(' + ');\n        }\n        // Calc() not required\n        else {\n            let column_width;\n\n            // Loop through all preceding columns\n            for (i = 0; i < (column - 1); i++) {\n                // Get sibling values from columns_normalized or order\n                if (order) {\n                    sibling_val = settings.columns_normalized[order[i] - 1];\n                }\n                else {\n                    sibling_val = settings.columns_normalized[i];\n                }\n\n                // Add ratio-based value\n                if (Number(sibling_val)) {\n                    const grid_col_width = settings.grid_col_width;\n\n                    column_width = unitMath([grid_col_width, sibling_val], ' * ');\n                    offset       = unitMath([offset, column_width, settings.gap_h], ' + ');\n                }\n                // Add unit-based value\n                else {\n                    column_width = unitMath([sibling_val, settings.gap_h], ' + ');\n                    offset       = unitMath([offset, column_width], ' + ');\n                }\n            }\n        }\n    }\n\n    return offset;\n}\n","// Dependencies\n// =============================================================================\nimport getNumber from './get-number';\nimport getUnit   from './get-unit';\n\n\n// Exports\n// =============================================================================\n// Compare units of array items, ignoring zero values w/o units\nexport default function(arr, matchUnit) {\n    // Return false if value os not a valid length (e.g. calc)\n    if (!getNumber(arr[0]) && !getUnit(arr[0])) {\n        return false;\n    }\n    // Get matching unit from first item if unspecified\n    else if (!matchUnit) {\n        matchUnit = getUnit(arr[0]);\n    }\n\n    // Loop through array values\n    for (let i = 0; i < arr.length; i++) {\n        const num  = getNumber(arr[i]);\n        const unit = num !== 0 ? getUnit(arr[i]) : false;\n\n        // Return false if value is not a valid length (e.g. calc)\n        if (num === false && unit === false) {\n            return false;\n        }\n        // Return false if units do not match\n        if (num !== 0 && unit !== matchUnit) {\n            return false;\n        }\n    }\n\n    return true;\n}\n","// Dependencies\n// =============================================================================\nimport getOrderOffset from '../util/get-order-offset';\nimport getUnit        from '../util/get-unit';\nimport isUnitMatch    from '../util/is-unit-match';\nimport unitMath       from '../util/unit-math';\n\n\n// Exports\n// =============================================================================\n// Generates new object containing grid properties\nexport default function Grid(settings, options) {\n    options = options || {};\n\n    // Protect against instantiating without `new` keyword\n    if (!(this instanceof Grid)) {\n        return new Grid(settings, options);\n    }\n\n    // Nth-Grid Defaults\n    const defaults = {\n        // Layout\n        columns               : [1],\n        gap                   : 0,\n        margin                : 0,\n        center                : true,\n        direction             : 'ltr',\n        legacy                : false,\n\n        // Debug\n        debug                 : false,\n        debug_background_color: '#000',\n        debug_text_color      : '#ccc',\n\n        // Overlay\n        overlay               : false,\n        overlay_column_color  : '#7c48c3',\n        overlay_margin_color  : '#dabfff',\n        overlay_text_color    : '#fff',\n\n        // Compilation\n        rem_base              : 16,\n        remove_warnings       : true,\n        warnings              : true\n    };\n\n    // Private defaults\n    const settings_private = {\n        width                 : '100%',\n        order                 : false,\n        auto_width            : null,\n        calc                  : null,\n        columns_ratio         : [],\n        columns_unit          : [],\n        grid_col_ratio        : 0,\n        grid_col_width        : 0,\n        grid_width            : null,\n        gap_h                 : 0,\n        columns_normalized    : [],\n        margin_h              : 0,\n        order_offsets         : [],\n        total_columns         : 0,\n        total_ratio_columns   : 0,\n        total_unit_columns    : 0\n    };\n\n    // Update defaults with global options\n    for (const opt in options) {\n        if (opt in defaults) {\n            defaults[opt] = options[opt];\n        }\n    }\n\n    // Add private properties to settings\n    // Adding these after the global options prevents setting private\n    // settings via CSS or JS globals\n    for (const priv in settings_private) {\n        if (!(priv in settings)) {\n            settings[priv] = settings_private[priv];\n        }\n    }\n\n    // Add missing properties from defaults to settings\n    for (const key in defaults) {\n        if (!(key in settings)) {\n            settings[key] = defaults[key];\n        }\n    }\n\n    // Convert single-value columns layout and order settings to arrays\n    settings.columns = settings.columns instanceof Array ? settings.columns : [settings.columns];\n    settings.order = settings.order instanceof Array ? settings.order : settings.order !== false ? [settings.order] : settings.order;\n\n    // Extract horizontal gap and margin from arrays\n    settings.gap_h = settings.gap instanceof Array ? (settings.gap[1] || settings.gap[0]) : settings.gap;\n    settings.gap_v = settings.gap instanceof Array ? settings.gap[0] : settings.gap;\n    settings.margin_h = settings.margin instanceof Array ? (settings.margin[1] || settings.margin[0]) : settings.margin;\n    settings.margin_v = settings.margin instanceof Array ? settings.margin[0] : settings.margin;\n\n    // Direction\n    settings.dir_left  = settings.direction === 'rtl' ? 'right' : 'left';\n    settings.dir_right = settings.direction === 'rtl' ? 'left' : 'right';\n\n\n    // Populate settings\n    // ---------------------------------------------------------------------\n    let i;\n\n    // Ratio- and unit-based column lists\n    for (i = 0; i < settings.columns.length; i++) {\n        const val = settings.columns[i];\n\n        if (Number(val)) {\n            settings.columns_ratio.push(Number(val));\n        }\n        else {\n            settings.columns_unit.push(val);\n        }\n    }\n\n    // Total column count\n    settings.total_ratio_columns = settings.columns_ratio.length === 1 ? settings.columns_ratio[0] : settings.columns_ratio.length;\n    settings.total_unit_columns  = settings.columns_unit.length;\n    settings.total_columns       = settings.total_ratio_columns + settings.total_unit_columns;\n\n    // Calculate combined grid gap and margin\n    let grid_gaps = unitMath([settings.gap_h, (settings.total_columns - 1)], ' * '),\n        grid_margins = unitMath([settings.margin_h, 2], ' * ');\n\n    // Grid ratio\n    if (settings.columns_ratio.length === 1) {\n        settings.grid_col_ratio = settings.columns_ratio[0];\n    }\n    else {\n        settings.grid_col_ratio = 0;\n\n        // Sum ratio based column values\n        for (i = 0; i < settings.columns_ratio.length; i++) {\n            settings.grid_col_ratio += settings.columns_ratio[i];\n        }\n    }\n\n    // Are all units matched?\n    const isMatched = isUnitMatch([]\n        .concat(settings.width)\n        .concat(settings.columns_unit)\n        .concat(settings.gap)\n        .concat(settings.margin));\n\n    // All all grid units matched?\n    const isMatchedGrid = settings.columns_ratio.length === 0 && isUnitMatch([]\n        .concat(settings.columns_unit)\n        .concat(settings.gap)\n        .concat(settings.margin));\n\n    // Are all grid values percent?\n    const isPercentGrid = isUnitMatch([]\n        .concat(settings.columns_unit)\n        .concat(settings.gap)\n        .concat(settings.margin), '%');\n\n    // Calc() required?\n    settings.calc = !(isMatched || isMatchedGrid || isPercentGrid);\n\n    // Grid container auto width\n    if (settings.columns_ratio.length === 0) {\n        // Calc() required\n        if (settings.calc) {\n            const grid_unit_cols = isUnitMatch(settings.columns_unit) ? unitMath(settings.columns_unit, ' + ') : settings.columns_unit.join(' + ');\n\n            // Matched gap & margin units\n            if (settings.gap_h !== 0 && settings.margin_h !== 0 && isUnitMatch([grid_gaps, grid_margins])) {\n                settings.auto_width = grid_unit_cols + ' + ' + unitMath([grid_gaps, grid_margins], ' + ');\n            }\n            // Matched column and gap units\n            else if (settings.gap_h !== 0 && isUnitMatch([grid_unit_cols, grid_gaps])) {\n                settings.auto_width = unitMath([grid_unit_cols, grid_gaps], ' + ') + ' + ' + (settings.margin_h !== 0 ? grid_margins : '');\n            }\n            // Matched column and margin units\n            else if (settings.margin_h !== 0 && isUnitMatch([grid_unit_cols, grid_margins])) {\n                settings.auto_width = unitMath([grid_unit_cols, grid_margins], ' + ') + ' + ' + (settings.gap_h !== 0 ? grid_gaps : '');\n            }\n            // No match\n            else {\n                settings.auto_width = grid_unit_cols;\n\n                // Add gaps\n                if (settings.gap_h !== 0) {\n                    settings.auto_width += ' + ' + grid_gaps;\n                }\n\n                // Add margins\n                if (settings.margin_h !== 0) {\n                    settings.auto_width += ' + ' + grid_margins;\n                }\n            }\n        }\n        // Calc() not required\n        else {\n            // Unit-based columns\n            settings.auto_width = unitMath(settings.columns_unit, ' + ');\n\n            // Add gaps and margins\n            settings.auto_width = unitMath([settings.auto_width, grid_gaps, grid_margins], ' + ');\n        }\n    }\n\n    // Ratio grid width - Calc() required\n    // Grid width of 99.99% used for sub-pixel rendering bug (e.g. IE9, Chrome < 38)\n    if (settings.calc) {\n        // Single unit-based column\n        if (settings.columns_unit.length === 1) {\n            settings.grid_width = '99.99% - ' + settings.columns_unit[0];\n        }\n        // Multiple unit-based columns\n        else if (settings.columns_unit.length > 1) {\n            // Matched units\n            if (isUnitMatch(settings.columns_unit)) {\n                settings.grid_width = '99.99% - ' + unitMath(settings.columns_unit, ' + ');\n            }\n            // Mixed units\n            else {\n                settings.grid_width = '99.99% - (' + settings.columns_unit.join(' + ') + ')';\n            }\n        }\n        // No unit-based columns\n        else {\n            settings.grid_width = '99.99%';\n        }\n    }\n    // Ratio grid width - Calc() not required\n    else {\n        if (isMatched && getUnit(settings.width) !== '%') {\n            settings.grid_width = settings.width;\n\n            // Subtract unit-based column values from width\n            if (settings.columns_unit.length) {\n                settings.grid_width = unitMath([settings.grid_width, unitMath(settings.columns_unit, ' + ')], ' - ');\n            }\n        }\n        else if (isPercentGrid) {\n            settings.grid_width = '100%';\n\n            // Subtract unit-based column values from width\n            if (settings.columns_unit.length) {\n                settings.grid_width = unitMath([settings.grid_width, unitMath(settings.columns_unit, ' + ')], ' - ');\n            }\n        }\n        else {\n            settings.grid_width = '100%';\n        }\n    }\n\n    // Ratio-based column width\n    if (settings.total_ratio_columns > 0) {\n        // Calc() required\n        if (settings.calc) {\n            // Matched gap and margin units\n            if (settings.gap_h !== 0 && settings.margin_h !== 0 && isUnitMatch([settings.gap_h, settings.margin_h])) {\n                settings.grid_col_width = settings.grid_width + ' - ' + unitMath([grid_gaps, grid_margins], ' + ');\n            }\n            // Matched column and gap units\n            else if (settings.gap_h !== 0 && isUnitMatch([settings.grid_width, grid_gaps])) {\n                settings.grid_col_width = unitMath([settings.grid_width, grid_gaps], ' - ');\n\n                if (grid_margins !== 0) {\n                    settings.grid_col_width += ' - ' + grid_margins;\n                }\n            }\n            // Matched column and margin units\n            else if (settings.margin_h !== 0 && isUnitMatch([settings.grid_width, grid_margins])) {\n                settings.grid_col_width = unitMath([settings.grid_width, grid_margins], ' - ');\n\n                if (grid_gaps !== 0) {\n                    settings.grid_col_width += ' - ' + grid_gaps;\n                }\n            }\n            // No match\n            else {\n                grid_gaps = settings.gap_h !== 0 ? ' - ' + grid_gaps : '';\n                grid_margins = settings.margin_h !== 0 ? ' - ' + grid_margins : '';\n\n                settings.grid_col_width = settings.grid_width + grid_gaps + grid_margins;\n            }\n\n            // Divide by grid ratio\n            settings.grid_col_width = '(' + settings.grid_col_width + ') / ' + settings.grid_col_ratio;\n        }\n        // Calc() not required\n        else {\n            // Calculate grid width without gaps and margins\n            settings.grid_col_width = unitMath([settings.grid_width, grid_gaps, grid_margins], ' - ');\n\n            // Divide by grid ratio\n            settings.grid_col_width = unitMath([settings.grid_col_width, settings.grid_col_ratio], ' / ');\n        }\n    }\n\n    // Calculate ordered column offsets\n    if (settings.order && settings.order.length <= settings.total_columns) {\n        // Expand single ratio-value column to multi-column\n        // Ex: nth-grid(6) /* columns_normalized: 1 1 1 1 1 1 */\n        if (settings.columns_ratio.length === 1) {\n            for (i = 0; i < settings.columns.length; i++) {\n                const col_val = settings.columns[i];\n                const num     = Number(col_val) || false;\n\n                // Single ratio-based value\n                if (num) {\n                    for (let j = 0; j < num; j++) {\n                        settings.columns_normalized.push(1);\n                    }\n                }\n                // Other values\n                else {\n                    settings.columns_normalized.push(col_val);\n                }\n            }\n        }\n        else {\n            settings.columns_normalized = settings.columns;\n        }\n\n        // Loop through order\n        for (i = 0; i < settings.order.length; i++) {\n            let offset    = 0;\n            const order_val = settings.order[i];\n\n            // Get offset of the order column value in the original column layout\n            // Ex: Column 3 offset in original @columns\n            const column_offset = getOrderOffset(settings, order_val);\n\n            // Get offset of the order column number in the ordered column layout\n            // Ex: Column 3 offset in $order 3 2 1 (1st position)\n            const order_offset = getOrderOffset(settings, i + 1, settings.order);\n\n            // Set final offset values in array\n            if (order_offset !== column_offset) {\n                // Calc() required\n                if (settings.calc) {\n                    if (order_offset === 0) {\n                        offset = '0px - (' + column_offset + ')';\n                    }\n                    else if (column_offset === 0) {\n                        offset = order_offset;\n                    }\n                    else {\n                        offset = '(' + order_offset + ') - (' + column_offset + ')';\n                    }\n                }\n                // Calc() not required\n                else {\n                    offset = unitMath([order_offset, column_offset], ' - ');\n                }\n            }\n\n            // Push value to order offset array\n            settings.order_offsets.push(offset);\n        }\n    }\n\n    // Return settings object\n    return settings;\n}\n","// Dependencies\n// =============================================================================\nimport toArray from './to-array';\n\n\n// Exports\n// =============================================================================\n// Converts Less tree object to javascript string, array, boolean, etc.\nexport default function toValue(obj) {\n    // Keyword\n    if (obj.type === 'Keyword') {\n        return obj.value;\n    }\n    // Dimension (number & unit)\n    else if (obj.type === 'Dimension') {\n        // Ignore units for zero values (e.g. 0px = 0);\n        if (obj.value === 0) {\n            return obj.value;\n        }\n        // Append unit to value\n        else {\n            return obj.value.toString().concat(obj.unit);\n        }\n    }\n    // Expression (array)\n    else if (obj.type === 'Expression') {\n        toArray(obj);\n    }\n    // Unknown\n    else {\n        // eslint-disable-next-line\n        console.log(`Unknown type: ${obj.type} Returning value: ${obj.value}`);\n        // eslint-disable-next-line\n        console.log(JSON.stringify(obj));\n\n        return obj;\n    }\n}\n","// Dependencies\n// =============================================================================\nimport toValue from './to-value';\n\n\n// Exports\n// =============================================================================\n// Converts Less tree object to javascript array of values\nexport default function toArray(obj) {\n    if (obj.type === 'Expression') {\n        const arr = [];\n\n        for (let i = 0; i < obj.value.length; i++) {\n            arr.push(toValue(obj.value[i]));\n        }\n\n        return arr;\n    }\n    else {\n        const value = toValue(obj);\n\n        return [value];\n    }\n}\n","/* global tree */\n\n// Dependencies\n// =============================================================================\nimport getNumber from '../../../postcss/util/get-number';\nimport getUnit   from '../../../postcss/util/get-unit';\n\n\n// Exports\n// =============================================================================\n// Converts javascript string, array, boolean, etc. to Less tree object\nexport default function toTree(value) {\n    // Boolean => Keyword\n    if (typeof(value) === 'boolean') {\n        return new tree.Keyword(value.toString());\n    }\n    // Array => Expression\n    else if (value instanceof Array) {\n        const arr = [];\n\n        for (let i = 0; i < value.length; i++) {\n            arr.push(toTree(value[i]));\n        }\n\n        return new tree.Expression(arr);\n    }\n    // Number => Dimension\n    else if (typeof value === 'number') {\n        return new tree.Dimension(value);\n    }\n    // Strings\n    else if (value !== null) {\n        const num  = getNumber(value);\n        const unit = getUnit(value);\n\n        // => Dimension (number & unit)\n        if (num !== false && unit !== false) {\n            return new tree.Dimension(num, unit);\n        }\n        // => Number\n        else if (num !== false) {\n            return new tree.Dimension(num);\n        }\n        // => String\n        else {\n            return new tree.Anonymous(value);\n        }\n    }\n    // Null\n    else {\n        return new tree.Anonymous(value);\n    }\n}\n","/* global functions, tree */\n\n// =============================================================================\n// Less Plugin Documentation (not easy to find, but these links help)\n// =============================================================================\n// Source\n// -----------------------------------------------------------------------------\n// https://github.com/less/less.js/tree/master/lib/less/tree\n// https://github.com/less/less.js/tree/master/test/less/plugin\n\n// Links\n// -----------------------------------------------------------------------------\n// https://github.com/less/less.js/issues/1861\n// https://github.com/less/less-docs/issues/328\n// https://github.com/less/less.js/pull/2479\n// https://github.com/less/less.js/pull/2522\n// https://github.com/less/less.js/issues/1862\n\n// Dependencies\n// =============================================================================\nimport Grid    from '../../postcss/lib/grid';\nimport toArray from './lib/to-array';\nimport toTree  from './lib/to-tree';\nimport toValue from './lib/to-value';\n\n\n// Plugin\n// =============================================================================\nlet settings;\n\nconst api = {\n    // Log message to console\n    'nth-log': function(lessTreeObj) {\n        // eslint-disable-next-line\n        console.log(`Nth-Grid: ${lessTreeObj.value}`);\n\n        return false;\n    },\n    // Log warning message to console\n    'nth-warn': function(lessTreeObj) {\n        // eslint-disable-next-line\n        console.warn(`Nth-Grid: ${lessTreeObj.value}`);\n\n        return false;\n    },\n    // Creates Grid instance\n    'nth-grid': function(columns, gap, margin, width, order) {\n        // Convert Less tree objects to standard JavaScript types\n        settings = {\n            columns: toArray(columns),\n            gap    : toArray(gap),\n            margin : toArray(margin),\n            width  : toValue(width),\n            order  : order.type === 'Expression' ? toArray(order) : false\n        };\n\n        settings = new Grid(settings);\n\n        // Send return value (warning message displayed if not true)\n        return new tree.Keyword('true');\n    },\n    // Returns value from Grid instance\n    'nth-get': function(lessTreeObj) {\n        const key = lessTreeObj.value;\n\n        // Check if key exists\n        if (key in settings) {\n            // Return Less tree object\n            return toTree(settings[key]);\n        }\n        // Invalid key\n        else {\n            // eslint-disable-next-line\n            console.log(`NTH-GRID: ${key} is not a valid key.`);\n        }\n    }\n};\n\n// Add functions to Less registry\nfunctions.addMultiple(api);\n"],"names":["value","falseValue","vars","reNotLength","test","match","toString","reNumber","number","length","Number","reUnit","unit","stringMath","expression","Function","arr","operator","finalUnit","nums","i","num","getNumber","getUnit","log","push","trim","replace","result","join","concat","settings","column","order","offset","sibling_val","calc","offset_vals","sibling_gaps","sibling_ratio_cols","sibling_unit_cols","columns_normalized","gap_h","grid_col_width","column_width","unitMath","matchUnit","Grid","options","this","defaults","settings_private","opt","priv","key","columns","Array","gap","gap_v","margin_h","margin","margin_v","dir_left","direction","dir_right","val","columns_ratio","columns_unit","total_ratio_columns","total_unit_columns","total_columns","grid_gaps","grid_margins","grid_col_ratio","isMatched","isUnitMatch","width","isMatchedGrid","isPercentGrid","grid_unit_cols","auto_width","grid_width","col_val","j","order_val","column_offset","getOrderOffset","order_offset","order_offsets","toValue","obj","type","JSON","stringify","toArray","toTree","tree","Keyword","Expression","Dimension","Anonymous","api","lessTreeObj","warn","functions","addMultiple"],"mappings":"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"}