/*!
 * nth-grid
 * v0.0.0
 * https://github.com/jhildenbiddle/nth-grid
 * (c) 2018 John Hildenbiddle
 * MIT license
 */
!function(){"use strict";var t={reNotLength:/[^\w%.-]/,reNumber:/^[-+]?[0-9]*\.?[0-9]+/,reUnit:/[a-z|%]+$/,rounding:5};function r(r,n){if(t.reNotLength.test(r))return!1;var i=r.toString().match(t.reNumber)||!1;return i.length?1*Number(i):n||!1}function n(r,n){if(t.reNotLength.test(r))return!1;var i=r.toString().match(t.reUnit)||!1;return i.length?i.toString():n||!1}function i(t,i){for(var o="",e=[],u=0;u<t.length;u++){var l=r(t[u]),a=n(t[u]);if(0!==l&&a.length){if(o.length&&a!==o)return console.log("NTH-GRID: Incompatible unitMath() arguments: "+t),0;o=a}e.push(l)}i=i.trim().replace(/[^+\-*\/().\d\s]/g,"");var _,c=e.length?(_=e.join(i),new Function("return "+_)()).toString().concat(o):0;return 0===Number(c)?0:c}function o(t,r,n){var o=0,e=void 0;if(r>1){var u=void 0;if(t.calc){var l=[],a=0,_=0,c=[];for(e=0;e<r-1;e++)u=n?t.columns_normalized[n[e]-1]:t.columns_normalized[e],0!==t.gutter_h&&(a+=1),Number(u)?_+=Number(u):c.push(u);_>0&&(1===_?l.push(t.grid_col_width):l.push("(("+t.grid_col_width+") * "+_+")")),c.length>0&&l.push(c.join(" + ")),a>0&&(1===a?l.push(t.gutter_h):l.push("("+t.gutter_h+" * "+a+")")),o=l.join(" + ")}else{var g=void 0;for(e=0;e<r-1;e++){if(u=n?t.columns_normalized[n[e]-1]:t.columns_normalized[e],Number(u))g=i([t.grid_col_width,u]," * "),o=i([o,g,t.gutter_h]," + ");else g=i([u,t.gutter_h]," + "),o=i([o,g]," + ")}}}return o}function e(t,i){if(!r(t[0])&&!n(t[0]))return!1;i||(i=n(t[0]));for(var o=0;o<t.length;o++){var e=r(t[o]),u=0!==e&&n(t[o]);if(!1===e&&!1===u)return!1;if(0!==e&&u!==i)return!1}return!0}function u(t,r){if(r=r||{},!(this instanceof u))return new u(t,r);var l={columns:[1],gutter:0,margin:0,center:!0,eqheight:!1,valign:!1,direction:"ltr",legacy:!1,debug:!1,debug_background_color:"#000",debug_text_color:"#ccc",overlay:!1,overlay_column_color:"#7c48c3",overlay_margin_color:"#dabfff",overlay_text_color:"#fff",rem_base:16,remove_warnings:!0,warnings:!0},a={width:"100%",order:!1,auto_width:null,calc:null,columns_ratio:[],columns_unit:[],grid_col_ratio:0,grid_col_width:0,grid_width:null,gutter_h:0,columns_normalized:[],margin_h:0,order_offsets:[],total_columns:0,total_ratio_columns:0,total_unit_columns:0};for(var _ in r)_ in l&&(l[_]=r[_]);for(var c in a)c in t||(t[c]=a[c]);for(var g in l)g in t||(t[g]=l[g]);t.columns=t.columns instanceof Array?t.columns:[t.columns],t.order=t.order instanceof Array?t.order:!1!==t.order?[t.order]:t.order,t.gutter_h=t.gutter instanceof Array?t.gutter[1]||t.gutter[0]:t.gutter,t.gutter_v=t.gutter instanceof Array?t.gutter[0]:t.gutter,t.margin_h=t.margin instanceof Array?t.margin[1]||t.margin[0]:t.margin,t.margin_v=t.margin instanceof Array?t.margin[0]:t.margin,t.dir_left="rtl"===t.direction?"right":"left",t.dir_right="rtl"===t.direction?"left":"right";var d=void 0;for(d=0;d<t.columns.length;d++){var h=t.columns[d];Number(h)?t.columns_ratio.push(Number(h)):t.columns_unit.push(h)}t.total_ratio_columns=1===t.columns_ratio.length?t.columns_ratio[0]:t.columns_ratio.length,t.total_unit_columns=t.columns_unit.length,t.total_columns=t.total_ratio_columns+t.total_unit_columns;var s=i([t.gutter_h,t.total_columns-1]," * "),m=i([t.margin_h,2]," * ");if(1===t.columns_ratio.length)t.grid_col_ratio=t.columns_ratio[0];else for(t.grid_col_ratio=0,d=0;d<t.columns_ratio.length;d++)t.grid_col_ratio+=t.columns_ratio[d];var f=e([].concat(t.width).concat(t.columns_unit).concat(t.gutter).concat(t.margin)),w=0===t.columns_ratio.length&&e([].concat(t.columns_unit).concat(t.gutter).concat(t.margin)),v=e([].concat(t.columns_unit).concat(t.gutter).concat(t.margin),"%");if(t.calc=!(f||w||v),0===t.columns_ratio.length)if(t.calc){var p=e(t.columns_unit)?i(t.columns_unit," + "):t.columns_unit.join(" + ");0!==t.gutter_h&&0!==t.margin_h&&e([s,m])?t.auto_width=p+" + "+i([s,m]," + "):0!==t.gutter_h&&e([p,s])?t.auto_width=i([p,s]," + ")+" + "+(0!==t.margin_h?m:""):0!==t.margin_h&&e([p,m])?t.auto_width=i([p,m]," + ")+" + "+(0!==t.gutter_h?s:""):(t.auto_width=p,0!==t.gutter_h&&(t.auto_width+=" + "+s),0!==t.margin_h&&(t.auto_width+=" + "+m))}else t.auto_width=i(t.columns_unit," + "),t.auto_width=i([t.auto_width,s,m]," + ");if(t.calc?1===t.columns_unit.length?t.grid_width="99.99% - "+t.columns_unit[0]:t.columns_unit.length>1?e(t.columns_unit)?t.grid_width="99.99% - "+i(t.columns_unit," + "):t.grid_width="99.99% - ("+t.columns_unit.join(" + ")+")":t.grid_width="99.99%":f&&"%"!==n(t.width)?(t.grid_width=t.width,t.columns_unit.length&&(t.grid_width=i([t.grid_width,i(t.columns_unit," + ")]," - "))):v?(t.grid_width="100%",t.columns_unit.length&&(t.grid_width=i([t.grid_width,i(t.columns_unit," + ")]," - "))):t.grid_width="100%",t.total_ratio_columns>0&&(t.calc?(0!==t.gutter_h&&0!==t.margin_h&&e([t.gutter_h,t.margin_h])?t.grid_col_width=t.grid_width+" - "+i([s,m]," + "):0!==t.gutter_h&&e([t.grid_width,s])?(t.grid_col_width=i([t.grid_width,s]," - "),0!==m&&(t.grid_col_width+=" - "+m)):0!==t.margin_h&&e([t.grid_width,m])?(t.grid_col_width=i([t.grid_width,m]," - "),0!==s&&(t.grid_col_width+=" - "+s)):(s=0!==t.gutter_h?" - "+s:"",m=0!==t.margin_h?" - "+m:"",t.grid_col_width=t.grid_width+s+m),t.grid_col_width="("+t.grid_col_width+") / "+t.grid_col_ratio):(t.grid_col_width=i([t.grid_width,s,m]," - "),t.grid_col_width=i([t.grid_col_width,t.grid_col_ratio]," / "))),t.order&&t.order.length<=t.total_columns){
// Ex: nth-grid(6) /* columns_normalized: 1 1 1 1 1 1 */
if(1===t.columns_ratio.length)for(d=0;d<t.columns.length;d++){var y=t.columns[d],b=Number(y)||!1;if(b)for(var N=0;N<b;N++)t.columns_normalized.push(1);else t.columns_normalized.push(y)}else t.columns_normalized=t.columns;for(d=0;d<t.order.length;d++){var z=0,A=o(t,t.order[d]),x=o(t,d+1,t.order);x!==A&&(z=t.calc?0===x?"0px - ("+A+")":0===A?x:"("+x+") - ("+A+")":i([x,A]," - ")),t.order_offsets.push(z)}}return t}function l(t){return"Keyword"===t.type?t.value:"Dimension"===t.type?0===t.value?t.value:t.value.toString().concat(t.unit):"Expression"!==t.type?(console.log("Unknown type: "+t.type+" Returning value: "+t.value),console.log(JSON.stringify(t)),t):void a(t)}function a(t){if("Expression"===t.type){for(var r=[],n=0;n<t.value.length;n++)r.push(l(t.value[n]));return r}return[l(t)]}var _=void 0,c={"nth-log":function(t){return console.log("Nth-Grid: "+t.value),!1},"nth-warn":function(t){return console.warn("Nth-Grid: "+t.value),!1},"nth-grid":function(t,r,n,i,o){return _=new u(_={columns:a(t),gutter:a(r),margin:a(n),width:l(i),order:"Expression"===o.type&&a(o)}),new tree.Keyword("true")},"nth-get":function(t){var i=t.value;if(i in _)return function t(i){if("boolean"==typeof i)return new tree.Keyword(i.toString());if(i instanceof Array){for(var o=[],e=0;e<i.length;e++)o.push(t(i[e]));return new tree.Expression(o)}if("number"==typeof i)return new tree.Dimension(i);if(null!==i){var u=r(i),l=n(i);return!1!==u&&!1!==l?new tree.Dimension(u,l):!1!==u?new tree.Dimension(u):new tree.Anonymous(i)}return new tree.Anonymous(i)}(_[i]);console.log("NTH-GRID: "+i+" is not a valid key.")}};functions.addMultiple(c)}();
//# sourceMappingURL=less-plugin-nth-grid.min.js.map
