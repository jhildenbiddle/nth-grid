/*!
 * nth-grid
 * v0.0.0
 * https://github.com/jhildenbiddle/nth-grid
 * (c) 2018 John Hildenbiddle
 * MIT license
 */
!function(){"use strict";var vars={reNotLength:/[^\w%.-]/,reNumber:/^[-+]?[0-9]*\.?[0-9]+/,reUnit:/[a-z|%]+$/,rounding:5};function getNumber(t,r){if(vars.reNotLength.test(t))return!1;var n=t.toString().match(vars.reNumber)||!1;return n.length?1*Number(n):r||!1}function getUnit(t,r){if(vars.reNotLength.test(t))return!1;var n=t.toString().match(vars.reUnit)||!1;return n.length?n.toString():r||!1}function unitMath(arr,operator){for(var finalUnit="",nums=[],i=0;i<arr.length;i++){var num=getNumber(arr[i]),unit=getUnit(arr[i]);if(0!==num&&unit.length){if(finalUnit.length&&unit!==finalUnit)return console.log("NTH-GRID: Incompatible unitMath() arguments: "+arr),0;finalUnit=unit}nums.push(num)}operator=operator.trim().replace(/[^+\-*/().\d\s]/g,"");var result=nums.length?eval(nums.join(operator)).toString().concat(finalUnit):0;return 0===Number(result)?0:result}function getOrderOffset(t,r,n){var i=0,o=void 0;if(r>1){var e=void 0;if(t.calc){var u=[],a=0,l=0,c=[];for(o=0;o<r-1;o++)e=n?t.columns_normalized[n[o]-1]:t.columns_normalized[o],0!==t.gutter_h&&(a+=1),Number(e)?l+=Number(e):c.push(e);l>0&&(1===l?u.push(t.grid_col_width):u.push("(("+t.grid_col_width+") * "+l+")")),c.length>0&&u.push(c.join(" + ")),a>0&&(1===a?u.push(t.gutter_h):u.push("("+t.gutter_h+" * "+a+")")),i=u.join(" + ")}else{for(o=0;o<r-1;o++){if(e=n?t.columns_normalized[n[o]-1]:t.columns_normalized[o],Number(e))i=unitMath([i,unitMath([t.grid_col_width,e]," * "),t.gutter_h]," + ");else i=unitMath([i,unitMath([e,t.gutter_h]," + ")]," + ")}}}return i}function isUnitMatch(t,r){if(!getNumber(t[0])&&!getUnit(t[0]))return!1;r||(r=getUnit(t[0]));for(var n=0;n<t.length;n++){var i=getNumber(t[n]),o=0!==i&&getUnit(t[n]);if(!1===i&&!1===o)return!1;if(0!==i&&o!==r)return!1}return!0}function Grid(t,r){if(r=r||{},!(this instanceof Grid))return new Grid(t,r);var n={columns:[1],gutter:0,margin:0,center:!0,eqheight:!1,valign:!1,direction:"ltr",legacy:!1,debug:!1,debug_background_color:"#000",debug_text_color:"#ccc",overlay:!1,overlay_column_color:"#7c48c3",overlay_margin_color:"#dabfff",overlay_text_color:"#fff",rem_base:16,remove_warnings:!0,warnings:!0},i={width:"100%",order:!1,auto_width:null,calc:null,columns_ratio:[],columns_unit:[],grid_col_ratio:0,grid_col_width:0,grid_width:null,gutter_h:0,columns_normalized:[],margin_h:0,order_offsets:[],total_columns:0,total_ratio_columns:0,total_unit_columns:0};for(var o in r)o in n&&(n[o]=r[o]);for(var e in i)e in t||(t[e]=i[e]);for(var u in n)u in t||(t[u]=n[u]);t.columns=t.columns instanceof Array?t.columns:[t.columns],t.order=t.order instanceof Array?t.order:!1!==t.order?[t.order]:t.order,t.gutter_h=t.gutter instanceof Array?t.gutter[1]||t.gutter[0]:t.gutter,t.gutter_v=t.gutter instanceof Array?t.gutter[0]:t.gutter,t.margin_h=t.margin instanceof Array?t.margin[1]||t.margin[0]:t.margin,t.margin_v=t.margin instanceof Array?t.margin[0]:t.margin,t.dir_left="rtl"===t.direction?"right":"left",t.dir_right="rtl"===t.direction?"left":"right";var a=void 0;for(a=0;a<t.columns.length;a++){var l=t.columns[a];Number(l)?t.columns_ratio.push(Number(l)):t.columns_unit.push(l)}t.total_ratio_columns=1===t.columns_ratio.length?t.columns_ratio[0]:t.columns_ratio.length,t.total_unit_columns=t.columns_unit.length,t.total_columns=t.total_ratio_columns+t.total_unit_columns;var c=unitMath([t.gutter_h,t.total_columns-1]," * "),g=unitMath([t.margin_h,2]," * ");if(1===t.columns_ratio.length)t.grid_col_ratio=t.columns_ratio[0];else for(t.grid_col_ratio=0,a=0;a<t.columns_ratio.length;a++)t.grid_col_ratio+=t.columns_ratio[a];var _=isUnitMatch([].concat(t.width).concat(t.columns_unit).concat(t.gutter).concat(t.margin)),h=0===t.columns_ratio.length&&isUnitMatch([].concat(t.columns_unit).concat(t.gutter).concat(t.margin)),s=isUnitMatch([].concat(t.columns_unit).concat(t.gutter).concat(t.margin),"%");if(t.calc=!(_||h||s),0===t.columns_ratio.length)if(t.calc){var d=isUnitMatch(t.columns_unit)?unitMath(t.columns_unit," + "):t.columns_unit.join(" + ");0!==t.gutter_h&&0!==t.margin_h&&isUnitMatch([c,g])?t.auto_width=d+" + "+unitMath([c,g]," + "):0!==t.gutter_h&&isUnitMatch([d,c])?t.auto_width=unitMath([d,c]," + ")+" + "+(0!==t.margin_h?g:""):0!==t.margin_h&&isUnitMatch([d,g])?t.auto_width=unitMath([d,g]," + ")+" + "+(0!==t.gutter_h?c:""):(t.auto_width=d,0!==t.gutter_h&&(t.auto_width+=" + "+c),0!==t.margin_h&&(t.auto_width+=" + "+g))}else t.auto_width=unitMath(t.columns_unit," + "),t.auto_width=unitMath([t.auto_width,c,g]," + ");if(t.calc?1===t.columns_unit.length?t.grid_width="99.99% - "+t.columns_unit[0]:t.columns_unit.length>1?isUnitMatch(t.columns_unit)?t.grid_width="99.99% - "+unitMath(t.columns_unit," + "):t.grid_width="99.99% - ("+t.columns_unit.join(" + ")+")":t.grid_width="99.99%":_&&"%"!==getUnit(t.width)?(t.grid_width=t.width,t.columns_unit.length&&(t.grid_width=unitMath([t.grid_width,unitMath(t.columns_unit," + ")]," - "))):s?(t.grid_width="100%",t.columns_unit.length&&(t.grid_width=unitMath([t.grid_width,unitMath(t.columns_unit," + ")]," - "))):t.grid_width="100%",t.total_ratio_columns>0&&(t.calc?(0!==t.gutter_h&&0!==t.margin_h&&isUnitMatch([t.gutter_h,t.margin_h])?t.grid_col_width=t.grid_width+" - "+unitMath([c,g]," + "):0!==t.gutter_h&&isUnitMatch([t.grid_width,c])?(t.grid_col_width=unitMath([t.grid_width,c]," - "),0!==g&&(t.grid_col_width+=" - "+g)):0!==t.margin_h&&isUnitMatch([t.grid_width,g])?(t.grid_col_width=unitMath([t.grid_width,g]," - "),0!==c&&(t.grid_col_width+=" - "+c)):(c=0!==t.gutter_h?" - "+c:"",g=0!==t.margin_h?" - "+g:"",t.grid_col_width=t.grid_width+c+g),t.grid_col_width="("+t.grid_col_width+") / "+t.grid_col_ratio):(t.grid_col_width=unitMath([t.grid_width,c,g]," - "),t.grid_col_width=unitMath([t.grid_col_width,t.grid_col_ratio]," / "))),t.order&&t.order.length<=t.total_columns){
// Ex: nth-grid(6) /* columns_normalized: 1 1 1 1 1 1 */
if(1===t.columns_ratio.length)for(a=0;a<t.columns.length;a++){var m=t.columns[a],f=Number(m)||!1;if(f)for(var w=0;w<f;w++)t.columns_normalized.push(1);else t.columns_normalized.push(m)}else t.columns_normalized=t.columns;for(a=0;a<t.order.length;a++){var v=0,M=getOrderOffset(t,t.order[a]),p=getOrderOffset(t,a+1,t.order);p!==M&&(v=t.calc?0===p?"0px - ("+M+")":0===M?p:"("+p+") - ("+M+")":unitMath([p,M]," - ")),t.order_offsets.push(v)}}return t}function toValue(t){return"Keyword"===t.type?t.value:"Dimension"===t.type?0===t.value?t.value:t.value.toString().concat(t.unit):"Expression"!==t.type?(console.log("Unknown type: "+t.type+" Returning value: "+t.value),console.log(JSON.stringify(t)),t):void toArray(t)}function toArray(t){if("Expression"===t.type){for(var r=[],n=0;n<t.value.length;n++)r.push(toValue(t.value[n]));return r}return[toValue(t)]}function toTree(t){if("boolean"==typeof t)return new tree.Keyword(t.toString());if(t instanceof Array){for(var r=[],n=0;n<t.length;n++)r.push(toTree(t[n]));return new tree.Expression(r)}if("number"==typeof t)return new tree.Dimension(t);if(null!==t){var i=getNumber(t),o=getUnit(t);return!1!==i&&!1!==o?new tree.Dimension(i,o):!1!==i?new tree.Dimension(i):new tree.Anonymous(t)}return new tree.Anonymous(t)}var settings=void 0,api={"nth-log":function(t){return console.log("Nth-Grid: "+t.value),!1},"nth-warn":function(t){return console.warn("Nth-Grid: "+t.value),!1},"nth-grid":function(t,r,n,i,o){return settings=new Grid(settings={columns:toArray(t),gutter:toArray(r),margin:toArray(n),width:toValue(i),order:"Expression"===o.type&&toArray(o)}),new tree.Keyword("true")},"nth-get":function(t){var r=t.value;if(r in settings)return toTree(settings[r]);console.log("NTH-GRID: "+r+" is not a valid key.")}};functions.addMultiple(api)}();
//# sourceMappingURL=less-plugin-nth-grid.min.js.map
