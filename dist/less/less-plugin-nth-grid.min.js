/*!
 * nth-grid
 * v0.0.0
 * https://github.com/jhildenbiddle/nth-grid
 * (c) 2018 John Hildenbiddle
 * MIT license
 */
!function(){"use strict";var n={reNotLength:/[^\w%.-]/,reNumber:/^[-+]?[0-9]*\.?[0-9]+/,reUnit:/[a-z|%]+$/,rounding:5};function r(r,t){if(n.reNotLength.test(r))return!1;var o=r.toString().match(n.reNumber)||!1;return o.length?1*Number(o):t||!1}function t(r,t){if(n.reNotLength.test(r))return!1;var o=r.toString().match(n.reUnit)||!1;return o.length?o.toString():t||!1}function o(n,o){for(var i="",e=[],a=0;a<n.length;a++){var l=r(n[a]),u=t(n[a]);if(0!==l&&u.length){if(i.length&&u!==i)return console.log("NTH-GRID: Incompatible unitMath() arguments: "+n),0;i=u}e.push(l)}o=o.trim().replace(/[^+\-*\/().\d\s]/g,"");var _,c=e.length?(_=e.join(o),new Function("return "+_)()).toString().concat(i):0;return 0===Number(c)?0:c}function i(n,r,t){var i=0,e=void 0;if(r>1){var a=void 0;if(n.calc){var l=[],u=0,_=0,c=[];for(e=0;e<r-1;e++)a=t?n.columns_normalized[t[e]-1]:n.columns_normalized[e],0!==n.gap_h&&(u+=1),Number(a)?_+=Number(a):c.push(a);_>0&&(1===_?l.push(n.grid_col_width):l.push("(("+n.grid_col_width+") * "+_+")")),c.length>0&&l.push(c.join(" + ")),u>0&&(1===u?l.push(n.gap_h):l.push("("+n.gap_h+" * "+u+")")),i=l.join(" + ")}else{var g=void 0;for(e=0;e<r-1;e++){if(a=t?n.columns_normalized[t[e]-1]:n.columns_normalized[e],Number(a))g=o([n.grid_col_width,a]," * "),i=o([i,g,n.gap_h]," + ");else g=o([a,n.gap_h]," + "),i=o([i,g]," + ")}}}return i}function e(n,o){if(!r(n[0])&&!t(n[0]))return!1;o||(o=t(n[0]));for(var i=0;i<n.length;i++){var e=r(n[i]),a=0!==e&&t(n[i]);if(!1===e&&!1===a)return!1;if(0!==e&&a!==o)return!1}return!0}function a(n,r){if(r=r||{},!(this instanceof a))return new a(n,r);var l={columns:[1],gap:0,margin:0,direction:"ltr",legacy:!1,debug:!1,debug_background_color:"#000",debug_text_color:"#ccc",overlay:!1,overlay_column_color:"#7c48c3",overlay_margin_color:"#dabfff",overlay_text_color:"#fff",rem_base:16,remove_warnings:!0,warnings:!0},u={width:"100%",order:!1,auto_width:null,calc:null,columns_ratio:[],columns_unit:[],grid_col_ratio:0,grid_col_width:0,grid_width:null,gap_h:0,columns_normalized:[],margin_h:0,order_offsets:[],total_columns:0,total_ratio_columns:0,total_unit_columns:0};for(var _ in r)_ in l&&(l[_]=r[_]);for(var c in u)c in n||(n[c]=u[c]);for(var g in l)g in n||(n[g]=l[g]);n.columns=n.columns instanceof Array?n.columns:[n.columns],n.order=n.order instanceof Array?n.order:!1!==n.order?[n.order]:n.order,n.gap_h=n.gap instanceof Array?n.gap[1]||n.gap[0]:n.gap,n.gap_v=n.gap instanceof Array?n.gap[0]:n.gap,n.margin_h=n.margin instanceof Array?n.margin[1]||n.margin[0]:n.margin,n.margin_v=n.margin instanceof Array?n.margin[0]:n.margin,n.dir_left="rtl"===n.direction?"right":"left",n.dir_right="rtl"===n.direction?"left":"right";var d=void 0;for(d=0;d<n.columns.length;d++){var h=n.columns[d];Number(h)?n.columns_ratio.push(Number(h)):n.columns_unit.push(h)}n.total_ratio_columns=1===n.columns_ratio.length?n.columns_ratio[0]:n.columns_ratio.length,n.total_unit_columns=n.columns_unit.length,n.total_columns=n.total_ratio_columns+n.total_unit_columns;var s=o([n.gap_h,n.total_columns-1]," * "),m=o([n.margin_h,2]," * ");if(1===n.columns_ratio.length)n.grid_col_ratio=n.columns_ratio[0];else for(n.grid_col_ratio=0,d=0;d<n.columns_ratio.length;d++)n.grid_col_ratio+=n.columns_ratio[d];var f=e([].concat(n.width).concat(n.columns_unit).concat(n.gap).concat(n.margin)),w=0===n.columns_ratio.length&&e([].concat(n.columns_unit).concat(n.gap).concat(n.margin)),p=e([].concat(n.columns_unit).concat(n.gap).concat(n.margin),"%");if(n.calc=!(f||w||p),0===n.columns_ratio.length)if(n.calc){var v=e(n.columns_unit)?o(n.columns_unit," + "):n.columns_unit.join(" + ");0!==n.gap_h&&0!==n.margin_h&&e([s,m])?n.auto_width=v+" + "+o([s,m]," + "):0!==n.gap_h&&e([v,s])?n.auto_width=o([v,s]," + ")+" + "+(0!==n.margin_h?m:""):0!==n.margin_h&&e([v,m])?n.auto_width=o([v,m]," + ")+" + "+(0!==n.gap_h?s:""):(n.auto_width=v,0!==n.gap_h&&(n.auto_width+=" + "+s),0!==n.margin_h&&(n.auto_width+=" + "+m))}else n.auto_width=o(n.columns_unit," + "),n.auto_width=o([n.auto_width,s,m]," + ");if(n.calc?1===n.columns_unit.length?n.grid_width="99.99% - "+n.columns_unit[0]:n.columns_unit.length>1?e(n.columns_unit)?n.grid_width="99.99% - "+o(n.columns_unit," + "):n.grid_width="99.99% - ("+n.columns_unit.join(" + ")+")":n.grid_width="99.99%":f&&"%"!==t(n.width)?(n.grid_width=n.width,n.columns_unit.length&&(n.grid_width=o([n.grid_width,o(n.columns_unit," + ")]," - "))):p?(n.grid_width="100%",n.columns_unit.length&&(n.grid_width=o([n.grid_width,o(n.columns_unit," + ")]," - "))):n.grid_width="100%",n.total_ratio_columns>0&&(n.calc?(0!==n.gap_h&&0!==n.margin_h&&e([n.gap_h,n.margin_h])?n.grid_col_width=n.grid_width+" - "+o([s,m]," + "):0!==n.gap_h&&e([n.grid_width,s])?(n.grid_col_width=o([n.grid_width,s]," - "),0!==m&&(n.grid_col_width+=" - "+m)):0!==n.margin_h&&e([n.grid_width,m])?(n.grid_col_width=o([n.grid_width,m]," - "),0!==s&&(n.grid_col_width+=" - "+s)):(s=0!==n.gap_h?" - "+s:"",m=0!==n.margin_h?" - "+m:"",n.grid_col_width=n.grid_width+s+m),n.grid_col_width="("+n.grid_col_width+") / "+n.grid_col_ratio):(n.grid_col_width=o([n.grid_width,s,m]," - "),n.grid_col_width=o([n.grid_col_width,n.grid_col_ratio]," / "))),n.order&&n.order.length<=n.total_columns){
// Ex: nth-grid(6) /* columns_normalized: 1 1 1 1 1 1 */
if(1===n.columns_ratio.length)for(d=0;d<n.columns.length;d++){var y=n.columns[d],b=Number(y)||!1;if(b)for(var N=0;N<b;N++)n.columns_normalized.push(1);else n.columns_normalized.push(y)}else n.columns_normalized=n.columns;for(d=0;d<n.order.length;d++){var z=0,A=i(n,n.order[d]),x=i(n,d+1,n.order);x!==A&&(z=n.calc?0===x?"0px - ("+A+")":0===A?x:"("+x+") - ("+A+")":o([x,A]," - ")),n.order_offsets.push(z)}}return n}function l(n){return"Keyword"===n.type?n.value:"Dimension"===n.type?0===n.value?n.value:n.value.toString().concat(n.unit):"Expression"!==n.type?(console.log("Unknown type: "+n.type+" Returning value: "+n.value),console.log(JSON.stringify(n)),n):void u(n)}function u(n){if("Expression"===n.type){for(var r=[],t=0;t<n.value.length;t++)r.push(l(n.value[t]));return r}return[l(n)]}var _=void 0,c={"nth-log":function(n){return console.log("Nth-Grid: "+n.value),!1},"nth-warn":function(n){return console.warn("Nth-Grid: "+n.value),!1},"nth-grid":function(n,r,t,o,i){return _=new a(_={columns:u(n),gap:u(r),margin:u(t),width:l(o),order:"Expression"===i.type&&u(i)}),new tree.Keyword("true")},"nth-get":function(n){var o=n.value;if(o in _)return function n(o){if("boolean"==typeof o)return new tree.Keyword(o.toString());if(o instanceof Array){for(var i=[],e=0;e<o.length;e++)i.push(n(o[e]));return new tree.Expression(i)}if("number"==typeof o)return new tree.Dimension(o);if(null!==o){var a=r(o),l=t(o);return!1!==a&&!1!==l?new tree.Dimension(a,l):!1!==a?new tree.Dimension(a):new tree.Anonymous(o)}return new tree.Anonymous(o)}(_[o]);console.log("NTH-GRID: "+o+" is not a valid key.")}};functions.addMultiple(c)}();
//# sourceMappingURL=less-plugin-nth-grid.min.js.map
