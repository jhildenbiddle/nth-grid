{"version":3,"file":"less-plugin-nth-grid.min.js","sources":["../../src/postcss/lib/vars.js","../../src/postcss/util/get-number.js","../../src/postcss/util/get-unit.js","../../src/postcss/util/unit-math.js","../../src/postcss/util/get-order-offset.js","../../src/postcss/util/is-unit-match.js","../../src/postcss/lib/grid.js","../../src/less/plugin/lib/to-value.js","../../src/less/plugin/lib/to-array.js","../../src/less/plugin/index.js","../../src/less/plugin/lib/to-tree.js"],"sourcesContent":["// Exports\n// =============================================================================\nexport default {\n    // reNotLength: /[^\\w\\%\\.\\-]/,\n    reNotLength: /[^\\w%.-]/,\n    reNumber   : /^[-+]?[0-9]*\\.?[0-9]+/,\n    reUnit     : /[a-z|%]+$/,\n    rounding   : 5\n};\n","// Dependencies\n// =============================================================================\nimport vars from '../lib/vars';\n\n\n// Exports\n// =============================================================================\n// Get number in string (e.g. '12rem' => 12)\nexport default function(value, falseValue) {\n    if (vars.reNotLength.test(value)) {\n        return false;\n    }\n    else {\n        const match  = value.toString().match(vars.reNumber) || false;\n        const number = match.length ? Number(match) * 1 : falseValue || false;\n\n        return number;\n    }\n}\n","// Dependencies\n// =============================================================================\nimport vars from '../lib/vars';\n\n\n// Exports\n// =============================================================================\n// Get unit in string (e.g. '12rem' => 'rem')\nexport default function(value, falseValue) {\n    if (vars.reNotLength.test(value)) {\n        return false;\n    }\n    else {\n        const match = value.toString().match(vars.reUnit) || false;\n        const unit  = match.length ? match.toString() : falseValue || false;\n\n        return unit;\n    }\n}\n","// Dependencies\n// =============================================================================\nimport getNumber from './get-number';\nimport getUnit   from './get-unit';\n\n\n// Functions\n// =============================================================================\n// Calculates string as mathematical expression. Used instead of eval to avoid\n// console warning on compilation.\nfunction stringMath(expression) {\n    return new Function('return ' + expression)();\n}\n\n\n// Exports\n// =============================================================================\n// Allows for basic math on string lengths (numbers with with units)\n// Ex: unitMath(['1rem', '1rem'], ' + ') /* '2rem' */\nexport default function(arr, operator) {\n    let   finalUnit = '';\n    const nums      = [];\n\n    // Loop through array values\n    for (let i = 0; i < arr.length; i++) {\n        const num  = getNumber(arr[i]);\n        const unit = getUnit(arr[i]);\n\n        // Ignore zero value units\n        if (num !== 0) {\n            // Verify math compatibility and store unit\n            if (unit.length) {\n                if (finalUnit.length && unit !== finalUnit) {\n                    // eslint-disable-next-line\n                    console.log(`NTH-GRID: Incompatible unitMath() arguments: ${arr}`);\n\n                    return 0;\n                }\n                else {\n                    finalUnit = unit;\n                }\n            }\n        }\n\n        // Add item to numbers array\n        nums.push(num);\n    }\n\n    // Cleanse operator\n    operator = operator.trim().replace(/[^+\\-*/().\\d\\s]/g, '');\n\n    // Calculate result\n    const result = nums.length ? stringMath(nums.join(operator)).toString().concat(finalUnit) : 0; // jshint ignore:line\n\n    // Convert zero to number\n    return Number(result) === 0 ? 0 : result;\n}\n","// Dependencies\n// =============================================================================\nimport unitMath from '../util/unit-math';\n\n// Exports\n// =============================================================================\n// Calculates columns offset for source ordering.\n// Note that IE9 truncates css values after 128 characters. Grid columms\n// that require an offset using a calc() string longer than this will\n// not render properly.\nexport default function(settings, column, order) {\n    let offset = 0, i;\n\n    // Only columns following the first need offset calculated\n    if (column > 1) {\n        let sibling_val;\n\n        // Calc() required\n        if (settings.calc) {\n            // Store sibling ratio column and gap counts.\n            // Used to generate the shortest possible calc() strings\n            const offset_vals       = [];\n            let sibling_gaps     = 0;\n            let sibling_ratio_cols  = 0;\n            const sibling_unit_cols = [];\n\n            // Loop through all preceding columns\n            for (i = 0; i < (column - 1); i++) {\n                // Get sibling values from columns_normalized or order\n                if (order) {\n                    sibling_val = settings.columns_normalized[order[i] - 1];\n                }\n                else {\n                    sibling_val = settings.columns_normalized[i];\n                }\n\n                // Gap\n                if (settings.gap_h !== 0) {\n                    sibling_gaps += 1;\n                }\n\n                // Ratio-based value\n                if (Number(sibling_val)) {\n                    sibling_ratio_cols += Number(sibling_val);\n                }\n                // Unit-based value\n                else {\n                    sibling_unit_cols.push(sibling_val);\n                }\n            }\n\n            // Ratio offset\n            if (sibling_ratio_cols > 0) {\n                if (sibling_ratio_cols === 1) {\n                    offset_vals.push(settings.grid_col_width);\n                }\n                else {\n                    offset_vals.push('((' + settings.grid_col_width + ') * ' + sibling_ratio_cols + ')');\n                }\n            }\n\n            // Unit offset\n            if (sibling_unit_cols.length > 0) {\n                offset_vals.push(sibling_unit_cols.join(' + '));\n            }\n\n            // Gap offset\n            if (sibling_gaps > 0) {\n                if (sibling_gaps === 1) {\n                    offset_vals.push(settings.gap_h);\n                }\n                else {\n                    offset_vals.push('(' + settings.gap_h + ' * ' + sibling_gaps + ')');\n                }\n            }\n\n            // Final offset\n            offset = offset_vals.join(' + ');\n        }\n        // Calc() not required\n        else {\n            let column_width;\n\n            // Loop through all preceding columns\n            for (i = 0; i < (column - 1); i++) {\n                // Get sibling values from columns_normalized or order\n                if (order) {\n                    sibling_val = settings.columns_normalized[order[i] - 1];\n                }\n                else {\n                    sibling_val = settings.columns_normalized[i];\n                }\n\n                // Add ratio-based value\n                if (Number(sibling_val)) {\n                    const grid_col_width = settings.grid_col_width;\n\n                    column_width = unitMath([grid_col_width, sibling_val], ' * ');\n                    offset       = unitMath([offset, column_width, settings.gap_h], ' + ');\n                }\n                // Add unit-based value\n                else {\n                    column_width = unitMath([sibling_val, settings.gap_h], ' + ');\n                    offset       = unitMath([offset, column_width], ' + ');\n                }\n            }\n        }\n    }\n\n    return offset;\n}\n","// Dependencies\n// =============================================================================\nimport getNumber from './get-number';\nimport getUnit   from './get-unit';\n\n\n// Exports\n// =============================================================================\n// Compare units of array items, ignoring zero values w/o units\nexport default function(arr, matchUnit) {\n    // Return false if value os not a valid length (e.g. calc)\n    if (!getNumber(arr[0]) && !getUnit(arr[0])) {\n        return false;\n    }\n    // Get matching unit from first item if unspecified\n    else if (!matchUnit) {\n        matchUnit = getUnit(arr[0]);\n    }\n\n    // Loop through array values\n    for (let i = 0; i < arr.length; i++) {\n        const num  = getNumber(arr[i]);\n        const unit = num !== 0 ? getUnit(arr[i]) : false;\n\n        // Return false if value is not a valid length (e.g. calc)\n        if (num === false && unit === false) {\n            return false;\n        }\n        // Return false if units do not match\n        if (num !== 0 && unit !== matchUnit) {\n            return false;\n        }\n    }\n\n    return true;\n}\n","// Dependencies\n// =============================================================================\nimport getOrderOffset from '../util/get-order-offset';\nimport getUnit        from '../util/get-unit';\nimport isUnitMatch    from '../util/is-unit-match';\nimport unitMath       from '../util/unit-math';\n\n\n// Exports\n// =============================================================================\n// Generates new object containing grid properties\nexport default function Grid(settings, options) {\n    options = options || {};\n\n    // Protect against instantiating without `new` keyword\n    if (!(this instanceof Grid)) {\n        return new Grid(settings, options);\n    }\n\n    // Nth-Grid Defaults\n    const defaults = {\n        // Layout\n        columns               : [1],\n        gap                : 0,\n        margin                : 0,\n        center                : true,\n        eqheight              : false,\n        valign                : false,\n        direction             : 'ltr',\n        legacy                : false,\n\n        // Debug\n        debug                 : false,\n        debug_background_color: '#000',\n        debug_text_color      : '#ccc',\n\n        // Overlay\n        overlay               : false,\n        overlay_column_color  : '#7c48c3',\n        overlay_margin_color  : '#dabfff',\n        overlay_text_color    : '#fff',\n\n        // Compilation\n        rem_base              : 16,\n        remove_warnings       : true,\n        warnings              : true\n    };\n\n    // Private defaults\n    const settings_private = {\n        width                 : '100%',\n        order                 : false,\n        auto_width            : null,\n        calc                  : null,\n        columns_ratio         : [],\n        columns_unit          : [],\n        grid_col_ratio        : 0,\n        grid_col_width        : 0,\n        grid_width            : null,\n        gap_h              : 0,\n        columns_normalized    : [],\n        margin_h              : 0,\n        order_offsets         : [],\n        total_columns         : 0,\n        total_ratio_columns   : 0,\n        total_unit_columns    : 0\n    };\n\n    // Update defaults with global options\n    for (const opt in options) {\n        if (opt in defaults) {\n            defaults[opt] = options[opt];\n        }\n    }\n\n    // Add private properties to settings\n    // Adding these after the global options prevents setting private\n    // settings via CSS or JS globals\n    for (const priv in settings_private) {\n        if (!(priv in settings)) {\n            settings[priv] = settings_private[priv];\n        }\n    }\n\n    // Add missing properties from defaults to settings\n    for (const key in defaults) {\n        if (!(key in settings)) {\n            settings[key] = defaults[key];\n        }\n    }\n\n    // Convert single-value columns layout and order settings to arrays\n    settings.columns = settings.columns instanceof Array ? settings.columns : [settings.columns];\n    settings.order = settings.order instanceof Array ? settings.order : settings.order !== false ? [settings.order] : settings.order;\n\n    // Extract horizontal gap and margin from arrays\n    settings.gap_h = settings.gap instanceof Array ? (settings.gap[1] || settings.gap[0]) : settings.gap;\n    settings.gap_v = settings.gap instanceof Array ? settings.gap[0] : settings.gap;\n    settings.margin_h = settings.margin instanceof Array ? (settings.margin[1] || settings.margin[0]) : settings.margin;\n    settings.margin_v = settings.margin instanceof Array ? settings.margin[0] : settings.margin;\n\n    // Direction\n    settings.dir_left  = settings.direction === 'rtl' ? 'right' : 'left';\n    settings.dir_right = settings.direction === 'rtl' ? 'left' : 'right';\n\n\n    // Populate settings\n    // ---------------------------------------------------------------------\n    let i;\n\n    // Ratio- and unit-based column lists\n    for (i = 0; i < settings.columns.length; i++) {\n        const val = settings.columns[i];\n\n        if (Number(val)) {\n            settings.columns_ratio.push(Number(val));\n        }\n        else {\n            settings.columns_unit.push(val);\n        }\n    }\n\n    // Total column count\n    settings.total_ratio_columns = settings.columns_ratio.length === 1 ? settings.columns_ratio[0] : settings.columns_ratio.length;\n    settings.total_unit_columns  = settings.columns_unit.length;\n    settings.total_columns       = settings.total_ratio_columns + settings.total_unit_columns;\n\n    // Calculate combined grid gap and margin\n    let grid_gaps = unitMath([settings.gap_h, (settings.total_columns - 1)], ' * '),\n        grid_margins = unitMath([settings.margin_h, 2], ' * ');\n\n    // Grid ratio\n    if (settings.columns_ratio.length === 1) {\n        settings.grid_col_ratio = settings.columns_ratio[0];\n    }\n    else {\n        settings.grid_col_ratio = 0;\n\n        // Sum ratio based column values\n        for (i = 0; i < settings.columns_ratio.length; i++) {\n            settings.grid_col_ratio += settings.columns_ratio[i];\n        }\n    }\n\n    // Are all units matched?\n    const isMatched = isUnitMatch([]\n        .concat(settings.width)\n        .concat(settings.columns_unit)\n        .concat(settings.gap)\n        .concat(settings.margin));\n\n    // All all grid units matched?\n    const isMatchedGrid = settings.columns_ratio.length === 0 && isUnitMatch([]\n        .concat(settings.columns_unit)\n        .concat(settings.gap)\n        .concat(settings.margin));\n\n    // Are all grid values percent?\n    const isPercentGrid = isUnitMatch([]\n        .concat(settings.columns_unit)\n        .concat(settings.gap)\n        .concat(settings.margin), '%');\n\n    // Calc() required?\n    settings.calc = !(isMatched || isMatchedGrid || isPercentGrid);\n\n    // Grid container auto width\n    if (settings.columns_ratio.length === 0) {\n        // Calc() required\n        if (settings.calc) {\n            const grid_unit_cols = isUnitMatch(settings.columns_unit) ? unitMath(settings.columns_unit, ' + ') : settings.columns_unit.join(' + ');\n\n            // Matched gap & margin units\n            if (settings.gap_h !== 0 && settings.margin_h !== 0 && isUnitMatch([grid_gaps, grid_margins])) {\n                settings.auto_width = grid_unit_cols + ' + ' + unitMath([grid_gaps, grid_margins], ' + ');\n            }\n            // Matched column and gap units\n            else if (settings.gap_h !== 0 && isUnitMatch([grid_unit_cols, grid_gaps])) {\n                settings.auto_width = unitMath([grid_unit_cols, grid_gaps], ' + ') + ' + ' + (settings.margin_h !== 0 ? grid_margins : '');\n            }\n            // Matched column and margin units\n            else if (settings.margin_h !== 0 && isUnitMatch([grid_unit_cols, grid_margins])) {\n                settings.auto_width = unitMath([grid_unit_cols, grid_margins], ' + ') + ' + ' + (settings.gap_h !== 0 ? grid_gaps : '');\n            }\n            // No match\n            else {\n                settings.auto_width = grid_unit_cols;\n\n                // Add gaps\n                if (settings.gap_h !== 0) {\n                    settings.auto_width += ' + ' + grid_gaps;\n                }\n\n                // Add margins\n                if (settings.margin_h !== 0) {\n                    settings.auto_width += ' + ' + grid_margins;\n                }\n            }\n        }\n        // Calc() not required\n        else {\n            // Unit-based columns\n            settings.auto_width = unitMath(settings.columns_unit, ' + ');\n\n            // Add gaps and margins\n            settings.auto_width = unitMath([settings.auto_width, grid_gaps, grid_margins], ' + ');\n        }\n    }\n\n    // Ratio grid width - Calc() required\n    // Grid width of 99.99% used for sub-pixel rendering bug (e.g. IE9, Chrome < 38)\n    if (settings.calc) {\n        // Single unit-based column\n        if (settings.columns_unit.length === 1) {\n            settings.grid_width = '99.99% - ' + settings.columns_unit[0];\n        }\n        // Multiple unit-based columns\n        else if (settings.columns_unit.length > 1) {\n            // Matched units\n            if (isUnitMatch(settings.columns_unit)) {\n                settings.grid_width = '99.99% - ' + unitMath(settings.columns_unit, ' + ');\n            }\n            // Mixed units\n            else {\n                settings.grid_width = '99.99% - (' + settings.columns_unit.join(' + ') + ')';\n            }\n        }\n        // No unit-based columns\n        else {\n            settings.grid_width = '99.99%';\n        }\n    }\n    // Ratio grid width - Calc() not required\n    else {\n        if (isMatched && getUnit(settings.width) !== '%') {\n            settings.grid_width = settings.width;\n\n            // Subtract unit-based column values from width\n            if (settings.columns_unit.length) {\n                settings.grid_width = unitMath([settings.grid_width, unitMath(settings.columns_unit, ' + ')], ' - ');\n            }\n        }\n        else if (isPercentGrid) {\n            settings.grid_width = '100%';\n\n            // Subtract unit-based column values from width\n            if (settings.columns_unit.length) {\n                settings.grid_width = unitMath([settings.grid_width, unitMath(settings.columns_unit, ' + ')], ' - ');\n            }\n        }\n        else {\n            settings.grid_width = '100%';\n        }\n    }\n\n    // Ratio-based column width\n    if (settings.total_ratio_columns > 0) {\n        // Calc() required\n        if (settings.calc) {\n            // Matched gap and margin units\n            if (settings.gap_h !== 0 && settings.margin_h !== 0 && isUnitMatch([settings.gap_h, settings.margin_h])) {\n                settings.grid_col_width = settings.grid_width + ' - ' + unitMath([grid_gaps, grid_margins], ' + ');\n            }\n            // Matched column and gap units\n            else if (settings.gap_h !== 0 && isUnitMatch([settings.grid_width, grid_gaps])) {\n                settings.grid_col_width = unitMath([settings.grid_width, grid_gaps], ' - ');\n\n                if (grid_margins !== 0) {\n                    settings.grid_col_width += ' - ' + grid_margins;\n                }\n            }\n            // Matched column and margin units\n            else if (settings.margin_h !== 0 && isUnitMatch([settings.grid_width, grid_margins])) {\n                settings.grid_col_width = unitMath([settings.grid_width, grid_margins], ' - ');\n\n                if (grid_gaps !== 0) {\n                    settings.grid_col_width += ' - ' + grid_gaps;\n                }\n            }\n            // No match\n            else {\n                grid_gaps = settings.gap_h !== 0 ? ' - ' + grid_gaps : '';\n                grid_margins = settings.margin_h !== 0 ? ' - ' + grid_margins : '';\n\n                settings.grid_col_width = settings.grid_width + grid_gaps + grid_margins;\n            }\n\n            // Divide by grid ratio\n            settings.grid_col_width = '(' + settings.grid_col_width + ') / ' + settings.grid_col_ratio;\n        }\n        // Calc() not required\n        else {\n            // Calculate grid width without gaps and margins\n            settings.grid_col_width = unitMath([settings.grid_width, grid_gaps, grid_margins], ' - ');\n\n            // Divide by grid ratio\n            settings.grid_col_width = unitMath([settings.grid_col_width, settings.grid_col_ratio], ' / ');\n        }\n    }\n\n    // Calculate ordered column offsets\n    if (settings.order && settings.order.length <= settings.total_columns) {\n        // Expand single ratio-value column to multi-column\n        // Ex: nth-grid(6) /* columns_normalized: 1 1 1 1 1 1 */\n        if (settings.columns_ratio.length === 1) {\n            for (i = 0; i < settings.columns.length; i++) {\n                const col_val = settings.columns[i];\n                const num     = Number(col_val) || false;\n\n                // Single ratio-based value\n                if (num) {\n                    for (let j = 0; j < num; j++) {\n                        settings.columns_normalized.push(1);\n                    }\n                }\n                // Other values\n                else {\n                    settings.columns_normalized.push(col_val);\n                }\n            }\n        }\n        else {\n            settings.columns_normalized = settings.columns;\n        }\n\n        // Loop through order\n        for (i = 0; i < settings.order.length; i++) {\n            let offset    = 0;\n            const order_val = settings.order[i];\n\n            // Get offset of the order column value in the original column layout\n            // Ex: Column 3 offset in original @columns\n            const column_offset = getOrderOffset(settings, order_val);\n\n            // Get offset of the order column number in the ordered column layout\n            // Ex: Column 3 offset in $order 3 2 1 (1st position)\n            const order_offset = getOrderOffset(settings, i + 1, settings.order);\n\n            // Set final offset values in array\n            if (order_offset !== column_offset) {\n                // Calc() required\n                if (settings.calc) {\n                    if (order_offset === 0) {\n                        offset = '0px - (' + column_offset + ')';\n                    }\n                    else if (column_offset === 0) {\n                        offset = order_offset;\n                    }\n                    else {\n                        offset = '(' + order_offset + ') - (' + column_offset + ')';\n                    }\n                }\n                // Calc() not required\n                else {\n                    offset = unitMath([order_offset, column_offset], ' - ');\n                }\n            }\n\n            // Push value to order offset array\n            settings.order_offsets.push(offset);\n        }\n    }\n\n    // Return settings object\n    return settings;\n}\n","// Dependencies\n// =============================================================================\nimport toArray from './to-array';\n\n\n// Exports\n// =============================================================================\n// Converts Less tree object to javascript string, array, boolean, etc.\nexport default function toValue(obj) {\n    // Keyword\n    if (obj.type === 'Keyword') {\n        return obj.value;\n    }\n    // Dimension (number & unit)\n    else if (obj.type === 'Dimension') {\n        // Ignore units for zero values (e.g. 0px = 0);\n        if (obj.value === 0) {\n            return obj.value;\n        }\n        // Append unit to value\n        else {\n            return obj.value.toString().concat(obj.unit);\n        }\n    }\n    // Expression (array)\n    else if (obj.type === 'Expression') {\n        toArray(obj);\n    }\n    // Unknown\n    else {\n        // eslint-disable-next-line\n        console.log(`Unknown type: ${obj.type} Returning value: ${obj.value}`);\n        // eslint-disable-next-line\n        console.log(JSON.stringify(obj));\n\n        return obj;\n    }\n}\n","// Dependencies\n// =============================================================================\nimport toValue from './to-value';\n\n\n// Exports\n// =============================================================================\n// Converts Less tree object to javascript array of values\nexport default function toArray(obj) {\n    if (obj.type === 'Expression') {\n        const arr = [];\n\n        for (let i = 0; i < obj.value.length; i++) {\n            arr.push(toValue(obj.value[i]));\n        }\n\n        return arr;\n    }\n    else {\n        const value = toValue(obj);\n\n        return [value];\n    }\n}\n","/* global functions, tree */\n\n// =============================================================================\n// Less Plugin Documentation (not easy to find, but these links help)\n// =============================================================================\n// Source\n// -----------------------------------------------------------------------------\n// https://github.com/less/less.js/tree/master/lib/less/tree\n// https://github.com/less/less.js/tree/master/test/less/plugin\n\n// Links\n// -----------------------------------------------------------------------------\n// https://github.com/less/less.js/issues/1861\n// https://github.com/less/less-docs/issues/328\n// https://github.com/less/less.js/pull/2479\n// https://github.com/less/less.js/pull/2522\n// https://github.com/less/less.js/issues/1862\n\n// Dependencies\n// =============================================================================\nimport Grid    from '../../postcss/lib/grid';\nimport toArray from './lib/to-array';\nimport toTree  from './lib/to-tree';\nimport toValue from './lib/to-value';\n\n\n// Plugin\n// =============================================================================\nlet settings;\n\nconst api = {\n    // Log message to console\n    'nth-log': function(lessTreeObj) {\n        // eslint-disable-next-line\n        console.log(`Nth-Grid: ${lessTreeObj.value}`);\n\n        return false;\n    },\n    // Log warning message to console\n    'nth-warn': function(lessTreeObj) {\n        // eslint-disable-next-line\n        console.warn(`Nth-Grid: ${lessTreeObj.value}`);\n\n        return false;\n    },\n    // Creates Grid instance\n    'nth-grid': function(columns, gap, margin, width, order) {\n        // Convert Less tree objects to standard JavaScript types\n        settings = {\n            columns: toArray(columns),\n            gap    : toArray(gap),\n            margin : toArray(margin),\n            width  : toValue(width),\n            order  : order.type === 'Expression' ? toArray(order) : false\n        };\n\n        settings = new Grid(settings);\n\n        // Send return value (warning message displayed if not true)\n        return new tree.Keyword('true');\n    },\n    // Returns value from Grid instance\n    'nth-get': function(lessTreeObj) {\n        const key = lessTreeObj.value;\n\n        // Check if key exists\n        if (key in settings) {\n            // Return Less tree object\n            return toTree(settings[key]);\n        }\n        // Invalid key\n        else {\n            // eslint-disable-next-line\n            console.log(`NTH-GRID: ${key} is not a valid key.`);\n        }\n    }\n};\n\n// Add functions to Less registry\nfunctions.addMultiple(api);\n","/* global tree */\n\n// Dependencies\n// =============================================================================\nimport getNumber from '../../../postcss/util/get-number';\nimport getUnit   from '../../../postcss/util/get-unit';\n\n\n// Exports\n// =============================================================================\n// Converts javascript string, array, boolean, etc. to Less tree object\nexport default function toTree(value) {\n    // Boolean => Keyword\n    if (typeof(value) === 'boolean') {\n        return new tree.Keyword(value.toString());\n    }\n    // Array => Expression\n    else if (value instanceof Array) {\n        const arr = [];\n\n        for (let i = 0; i < value.length; i++) {\n            arr.push(toTree(value[i]));\n        }\n\n        return new tree.Expression(arr);\n    }\n    // Number => Dimension\n    else if (typeof value === 'number') {\n        return new tree.Dimension(value);\n    }\n    // Strings\n    else if (value !== null) {\n        const num  = getNumber(value);\n        const unit = getUnit(value);\n\n        // => Dimension (number & unit)\n        if (num !== false && unit !== false) {\n            return new tree.Dimension(num, unit);\n        }\n        // => Number\n        else if (num !== false) {\n            return new tree.Dimension(num);\n        }\n        // => String\n        else {\n            return new tree.Anonymous(value);\n        }\n    }\n    // Null\n    else {\n        return new tree.Anonymous(value);\n    }\n}\n"],"names":["value","falseValue","vars","reNotLength","test","match","toString","reNumber","length","Number","reUnit","arr","operator","finalUnit","nums","i","num","getNumber","unit","getUnit","log","push","trim","replace","expression","result","join","Function","concat","settings","column","order","offset","sibling_val","calc","offset_vals","sibling_gaps","sibling_ratio_cols","sibling_unit_cols","columns_normalized","gap_h","grid_col_width","column_width","unitMath","matchUnit","Grid","options","this","defaults","settings_private","opt","priv","key","columns","Array","gap","gap_v","margin_h","margin","margin_v","dir_left","direction","dir_right","val","columns_ratio","columns_unit","total_ratio_columns","total_unit_columns","total_columns","grid_gaps","grid_margins","grid_col_ratio","isMatched","isUnitMatch","width","isMatchedGrid","isPercentGrid","grid_unit_cols","auto_width","grid_width","col_val","j","column_offset","getOrderOffset","order_offset","order_offsets","toValue","obj","type","JSON","stringify","toArray","api","lessTreeObj","warn","tree","Keyword","toTree","Expression","Dimension","Anonymous","functions","addMultiple"],"mappings":";;;;;;;+BAEe,aAEE,oBACA,+BACA,qBACA,GCCF,WAASA,EAAOC,MACvBC,EAAKC,YAAYC,KAAKJ,UACf,MAGDK,EAASL,EAAMM,WAAWD,MAAMH,EAAKK,YAAa,SACzCF,EAAMG,OAAyB,EAAhBC,OAAOJ,GAAaJ,IAAc,ECNzD,WAASD,EAAOC,MACvBC,EAAKC,YAAYC,KAAKJ,UACf,MAGDK,EAAQL,EAAMM,WAAWD,MAAMH,EAAKQ,UAAW,SACvCL,EAAMG,OAASH,EAAMC,WAAaL,IAAc,ECKvD,WAASU,EAAKC,WACnBC,EAAY,GACZC,EAAY,GAGTC,EAAI,EAAGA,EAAIJ,EAAIH,OAAQO,IAAK,KAC3BC,EAAOC,EAAUN,EAAII,IACrBG,EAAOC,EAAQR,EAAII,OAGb,IAARC,GAEIE,EAAKV,OAAQ,IACTK,EAAUL,QAAUU,IAASL,iBAErBO,oDAAoDT,GAErD,IAGKO,IAMnBG,KAAKL,KAIHJ,EAASU,OAAOC,QAAQ,oBAAoB,QAvCvCC,EA0CVC,EAASX,EAAKN,QA1CJgB,EA0CwBV,EAAKY,KAAKd,GAzC3C,IAAIe,SAAS,UAAYH,EAAzB,IAyCsDlB,WAAWsB,OAAOf,GAAa,SAGlE,IAAnBJ,OAAOgB,GAAgB,EAAIA,EC7CvB,WAASI,EAAUC,EAAQC,OAClCC,EAAS,EAAGjB,YAGZe,EAAS,EAAG,KACRG,YAGAJ,EAASK,KAAM,KAGTC,EAAoB,GACtBC,EAAmB,EACnBC,EAAsB,EACpBC,EAAoB,OAGrBvB,EAAI,EAAGA,EAAKe,EAAS,EAAIf,MAEtBgB,EACcF,EAASU,mBAAmBR,EAAMhB,GAAK,GAGvCc,EAASU,mBAAmBxB,GAIvB,IAAnBc,EAASW,WACO,GAIhB/B,OAAOwB,MACexB,OAAOwB,KAIXZ,KAAKY,GAK3BI,EAAqB,IACM,IAAvBA,IACYhB,KAAKQ,EAASY,kBAGdpB,KAAK,KAAOQ,EAASY,eAAiB,OAASJ,EAAqB,MAKpFC,EAAkB9B,OAAS,KACfa,KAAKiB,EAAkBZ,KAAK,QAIxCU,EAAe,IACM,IAAjBA,IACYf,KAAKQ,EAASW,SAGdnB,KAAK,IAAMQ,EAASW,MAAQ,MAAQJ,EAAe,QAK9DD,EAAYT,KAAK,WAGzB,KACGgB,aAGC3B,EAAI,EAAGA,EAAKe,EAAS,EAAIf,IAAK,MAE3BgB,EACcF,EAASU,mBAAmBR,EAAMhB,GAAK,GAGvCc,EAASU,mBAAmBxB,GAI1CN,OAAOwB,KAGQU,EAAS,CAFDd,EAASY,eAESR,GAAc,SACxCU,EAAS,CAACX,EAAQU,EAAcb,EAASW,OAAQ,cAIjDG,EAAS,CAACV,EAAaJ,EAASW,OAAQ,SACxCG,EAAS,CAACX,EAAQU,GAAe,gBAMzDV,ECpGI,WAASrB,EAAKiC,OAEpB3B,EAAUN,EAAI,MAAQQ,EAAQR,EAAI,WAC5B,EAGDiC,MACMzB,EAAQR,EAAI,SAIvB,IAAII,EAAI,EAAGA,EAAIJ,EAAIH,OAAQO,IAAK,KAC3BC,EAAOC,EAAUN,EAAII,IACrBG,EAAe,IAARF,GAAYG,EAAQR,EAAII,QAGzB,IAARC,IAA0B,IAATE,SACV,KAGC,IAARF,GAAaE,IAAS0B,SACf,SAIR,ECvBI,SAASC,EAAKhB,EAAUiB,QACzBA,GAAW,KAGfC,gBAAgBF,UACX,IAAIA,EAAKhB,EAAUiB,OAIxBE,EAAW,SAEW,CAAC,OACJ,SACG,UACA,YACA,UACA,YACA,cACA,SAGA,yBACA,wBACA,gBAGA,uBACA,+BACA,6BACA,gBAGA,oBACA,YACA,GAItBC,EAAmB,OACG,cACA,aACA,UACA,mBACA,gBACA,kBACA,iBACA,aACA,WACH,qBACG,YACA,gBACA,iBACA,sBACA,qBACA,OAIvB,IAAMC,KAAOJ,EACVI,KAAOF,MACEE,GAAOJ,EAAQI,QAO3B,IAAMC,KAAQF,EACTE,KAAQtB,MACDsB,GAAQF,EAAiBE,QAKrC,IAAMC,KAAOJ,EACRI,KAAOvB,MACAuB,GAAOJ,EAASI,MAKxBC,QAAUxB,EAASwB,mBAAmBC,MAAQzB,EAASwB,QAAU,CAACxB,EAASwB,WAC3EtB,MAAQF,EAASE,iBAAiBuB,MAAQzB,EAASE,OAA2B,IAAnBF,EAASE,MAAkB,CAACF,EAASE,OAASF,EAASE,QAGlHS,MAAQX,EAAS0B,eAAeD,MAASzB,EAAS0B,IAAI,IAAM1B,EAAS0B,IAAI,GAAM1B,EAAS0B,MACxFC,MAAQ3B,EAAS0B,eAAeD,MAAQzB,EAAS0B,IAAI,GAAK1B,EAAS0B,MACnEE,SAAW5B,EAAS6B,kBAAkBJ,MAASzB,EAAS6B,OAAO,IAAM7B,EAAS6B,OAAO,GAAM7B,EAAS6B,SACpGC,SAAW9B,EAAS6B,kBAAkBJ,MAAQzB,EAAS6B,OAAO,GAAK7B,EAAS6B,SAG5EE,SAAmC,QAAvB/B,EAASgC,UAAsB,QAAU,SACrDC,UAAmC,QAAvBjC,EAASgC,UAAsB,OAAS,YAKzD9C,aAGCA,EAAI,EAAGA,EAAIc,EAASwB,QAAQ7C,OAAQO,IAAK,KACpCgD,EAAMlC,EAASwB,QAAQtC,GAEzBN,OAAOsD,KACEC,cAAc3C,KAAKZ,OAAOsD,MAG1BE,aAAa5C,KAAK0C,KAK1BG,oBAAwD,IAAlCrC,EAASmC,cAAcxD,OAAeqB,EAASmC,cAAc,GAAKnC,EAASmC,cAAcxD,SAC/G2D,mBAAsBtC,EAASoC,aAAazD,SAC5C4D,cAAsBvC,EAASqC,oBAAsBrC,EAASsC,uBAGnEE,EAAY1B,EAAS,CAACd,EAASW,MAAQX,EAASuC,cAAgB,GAAK,OACrEE,EAAe3B,EAAS,CAACd,EAAS4B,SAAU,GAAI,UAGd,IAAlC5B,EAASmC,cAAcxD,SACd+D,eAAiB1C,EAASmC,cAAc,cAGxCO,eAAiB,EAGrBxD,EAAI,EAAGA,EAAIc,EAASmC,cAAcxD,OAAQO,MAClCwD,gBAAkB1C,EAASmC,cAAcjD,OAKpDyD,EAAYC,EAAY,GACzB7C,OAAOC,EAAS6C,OAChB9C,OAAOC,EAASoC,cAChBrC,OAAOC,EAAS0B,KAChB3B,OAAOC,EAAS6B,SAGfiB,EAAkD,IAAlC9C,EAASmC,cAAcxD,QAAgBiE,EAAY,GACpE7C,OAAOC,EAASoC,cAChBrC,OAAOC,EAAS0B,KAChB3B,OAAOC,EAAS6B,SAGfkB,EAAgBH,EAAY,GAC7B7C,OAAOC,EAASoC,cAChBrC,OAAOC,EAAS0B,KAChB3B,OAAOC,EAAS6B,QAAS,UAGrBxB,OAASsC,GAAaG,GAAiBC,GAGV,IAAlC/C,EAASmC,cAAcxD,UAEnBqB,EAASK,KAAM,KACT2C,EAAiBJ,EAAY5C,EAASoC,cAAgBtB,EAASd,EAASoC,aAAc,OAASpC,EAASoC,aAAavC,KAAK,OAGzG,IAAnBG,EAASW,OAAqC,IAAtBX,EAAS4B,UAAkBgB,EAAY,CAACJ,EAAWC,MAClEQ,WAAaD,EAAiB,MAAQlC,EAAS,CAAC0B,EAAWC,GAAe,OAG3D,IAAnBzC,EAASW,OAAeiC,EAAY,CAACI,EAAgBR,MACjDS,WAAanC,EAAS,CAACkC,EAAgBR,GAAY,OAAS,OAA+B,IAAtBxC,EAAS4B,SAAiBa,EAAe,IAG5F,IAAtBzC,EAAS4B,UAAkBgB,EAAY,CAACI,EAAgBP,MACpDQ,WAAanC,EAAS,CAACkC,EAAgBP,GAAe,OAAS,OAA4B,IAAnBzC,EAASW,MAAc6B,EAAY,OAI3GS,WAAaD,EAGC,IAAnBhD,EAASW,UACAsC,YAAc,MAAQT,GAIT,IAAtBxC,EAAS4B,aACAqB,YAAc,MAAQR,WAO9BQ,WAAanC,EAASd,EAASoC,aAAc,SAG7Ca,WAAanC,EAAS,CAACd,EAASiD,WAAYT,EAAWC,GAAe,UAMnFzC,EAASK,KAE4B,IAAjCL,EAASoC,aAAazD,SACbuE,WAAa,YAAclD,EAASoC,aAAa,GAGrDpC,EAASoC,aAAazD,OAAS,EAEhCiE,EAAY5C,EAASoC,gBACZc,WAAa,YAAcpC,EAASd,EAASoC,aAAc,SAI3Dc,WAAa,aAAelD,EAASoC,aAAavC,KAAK,OAAS,MAKpEqD,WAAa,SAKtBP,GAAyC,MAA5BrD,EAAQU,EAAS6C,UACrBK,WAAalD,EAAS6C,MAG3B7C,EAASoC,aAAazD,WACbuE,WAAapC,EAAS,CAACd,EAASkD,WAAYpC,EAASd,EAASoC,aAAc,QAAS,SAG7FW,KACIG,WAAa,OAGlBlD,EAASoC,aAAazD,WACbuE,WAAapC,EAAS,CAACd,EAASkD,WAAYpC,EAASd,EAASoC,aAAc,QAAS,WAIzFc,WAAa,OAK1BlD,EAASqC,oBAAsB,IAE3BrC,EAASK,MAEc,IAAnBL,EAASW,OAAqC,IAAtBX,EAAS4B,UAAkBgB,EAAY,CAAC5C,EAASW,MAAOX,EAAS4B,aAChFhB,eAAiBZ,EAASkD,WAAa,MAAQpC,EAAS,CAAC0B,EAAWC,GAAe,OAGpE,IAAnBzC,EAASW,OAAeiC,EAAY,CAAC5C,EAASkD,WAAYV,OACtD5B,eAAiBE,EAAS,CAACd,EAASkD,WAAYV,GAAY,OAEhD,IAAjBC,MACS7B,gBAAkB,MAAQ6B,IAIZ,IAAtBzC,EAAS4B,UAAkBgB,EAAY,CAAC5C,EAASkD,WAAYT,OACzD7B,eAAiBE,EAAS,CAACd,EAASkD,WAAYT,GAAe,OAEtD,IAAdD,MACS5B,gBAAkB,MAAQ4B,OAKR,IAAnBxC,EAASW,MAAc,MAAQ6B,EAAY,KAClB,IAAtBxC,EAAS4B,SAAiB,MAAQa,EAAe,KAEvD7B,eAAiBZ,EAASkD,WAAaV,EAAYC,KAIvD7B,eAAiB,IAAMZ,EAASY,eAAiB,OAASZ,EAAS0C,mBAKnE9B,eAAiBE,EAAS,CAACd,EAASkD,WAAYV,EAAWC,GAAe,SAG1E7B,eAAiBE,EAAS,CAACd,EAASY,eAAgBZ,EAAS0C,gBAAiB,SAK3F1C,EAASE,OAASF,EAASE,MAAMvB,QAAUqB,EAASuC,cAAe;;GAG7B,IAAlCvC,EAASmC,cAAcxD,WAClBO,EAAI,EAAGA,EAAIc,EAASwB,QAAQ7C,OAAQO,IAAK,KACpCiE,EAAUnD,EAASwB,QAAQtC,GAC3BC,EAAUP,OAAOuE,KAAY,KAG/BhE,MACK,IAAIiE,EAAI,EAAGA,EAAIjE,EAAKiE,MACZ1C,mBAAmBlB,KAAK,UAK5BkB,mBAAmBlB,KAAK2D,UAKhCzC,mBAAqBV,EAASwB,YAItCtC,EAAI,EAAGA,EAAIc,EAASE,MAAMvB,OAAQO,IAAK,KACpCiB,EAAY,EAKVkD,EAAgBC,EAAetD,EAJnBA,EAASE,MAAMhB,IAQ3BqE,EAAeD,EAAetD,EAAUd,EAAI,EAAGc,EAASE,OAG1DqD,IAAiBF,MAEbrD,EAASK,KACY,IAAjBkD,EACS,UAAYF,EAAgB,IAEd,IAAlBA,EACIE,EAGA,IAAMA,EAAe,QAAUF,EAAgB,IAKnDvC,EAAS,CAACyC,EAAcF,GAAgB,UAKhDG,cAAchE,KAAKW,WAK7BH,ECpWI,SAASyD,EAAQC,SAEX,YAAbA,EAAIC,KACGD,EAAIvF,MAGO,cAAbuF,EAAIC,KAES,IAAdD,EAAIvF,MACGuF,EAAIvF,MAIJuF,EAAIvF,MAAMM,WAAWsB,OAAO2D,EAAIrE,MAIzB,eAAbqE,EAAIC,cAMDpE,qBAAqBmE,EAAIC,0BAAyBD,EAAIvF,eAEtDoB,IAAIqE,KAAKC,UAAUH,IAEpBA,UATCA,GClBD,SAASI,EAAQJ,MACX,eAAbA,EAAIC,KAAuB,SACrB7E,EAAM,GAEHI,EAAI,EAAGA,EAAIwE,EAAIvF,MAAMQ,OAAQO,MAC9BM,KAAKiE,EAAQC,EAAIvF,MAAMe,YAGxBJ,QAKA,CAFO2E,EAAQC,ICS9B,IAAI1D,SAEE+D,EAAM,WAEG,SAASC,kBAERzE,iBAAiByE,EAAY7F,QAE9B,cAGC,SAAS6F,kBAETC,kBAAkBD,EAAY7F,QAE/B,cAGC,SAASqD,EAASE,EAAKG,EAAQgB,EAAO3C,YAUnC,IAAIc,IARJ,SACE8C,EAAQtC,OACRsC,EAAQpC,UACRoC,EAAQjC,SACR4B,EAAQZ,SACO,eAAf3C,EAAMyD,MAAwBG,EAAQ5D,KAM5C,IAAIgE,KAAKC,QAAQ,mBAGjB,SAASH,OACVzC,EAAMyC,EAAY7F,SAGpBoD,KAAOvB,SCvDJ,SAASoE,EAAOjG,MAEL,kBAAXA,SACA,IAAI+F,KAAKC,QAAQhG,EAAMM,YAG7B,GAAIN,aAAiBsD,MAAO,SACvB3C,EAAM,GAEHI,EAAI,EAAGA,EAAIf,EAAMQ,OAAQO,MAC1BM,KAAK4E,EAAOjG,EAAMe,YAGnB,IAAIgF,KAAKG,WAAWvF,GAG1B,GAAqB,iBAAVX,SACL,IAAI+F,KAAKI,UAAUnG,GAGzB,GAAc,OAAVA,EAAgB,KACfgB,EAAOC,EAAUjB,GACjBkB,EAAOC,EAAQnB,UAGT,IAARgB,IAA0B,IAATE,EACV,IAAI6E,KAAKI,UAAUnF,EAAKE,IAGlB,IAARF,EACE,IAAI+E,KAAKI,UAAUnF,GAInB,IAAI+E,KAAKK,UAAUpG,UAKvB,IAAI+F,KAAKK,UAAUpG,GDkBfiG,CAAOpE,EAASuB,YAKfhC,iBAAiBgC,4BAMrCiD,UAAUC,YAAYV"}